<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/base/favicon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/base/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/base/favicon.png"><link rel="mask-icon" href="/images/base/favicon.png" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"><link rel="stylesheet" href="/lib/pace/pace-theme-center-simple.min.css"><script src="/lib/pace/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"yoursite.com",root:"/",scheme:"Mist",version:"7.8.0",exturl:!0,sidebar:{position:"left",display:"always",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!0,color:"#222",save:"manual"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"buttons",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="è®°å½• React Hooks + TypeScript å¼€å‘ç»„ä»¶åº“çš„ç»éªŒğŸ˜"><meta property="og:type" content="article"><meta property="og:title" content="React Hooks + TypeScript å®æˆ˜è®°å½•"><meta property="og:url" content="http://yoursite.com/jd-share/index.html"><meta property="og:site_name" content="HuiAzir"><meta property="og:description" content="è®°å½• React Hooks + TypeScript å¼€å‘ç»„ä»¶åº“çš„ç»éªŒğŸ˜"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://yoursite.com/images/ts-1.png"><meta property="og:image" content="http://yoursite.com/images/grid-1.png"><meta property="og:image" content="http://yoursite.com/images/share-ex-1.png"><meta property="og:image" content="http://yoursite.com/images/share-ex-2.png"><meta property="article:published_time" content="2020-05-14T01:33:03.005Z"><meta property="article:modified_time" content="2020-05-15T01:38:26.954Z"><meta property="article:author" content="HuiAzir"><meta property="article:tag" content="ç»éªŒ"><meta property="article:tag" content="React"><meta property="article:tag" content="TypeScript"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://yoursite.com/images/ts-1.png"><link rel="canonical" href="http://yoursite.com/jd-share/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>React Hooks + TypeScript å®æˆ˜è®°å½• | HuiAzir</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ "><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">HuiAzir</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾<span class="badge">5</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£<span class="badge">4</span></a></li><li class="menu-item menu-item-vue2.xæºç è§£æ(å«3.0)"><a href="/categories/Vue/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" rel="section"><i class="fab fa-vuejs fa-fw"></i>Vue2.xæºç è§£æ(å«3.0)</a></li><li class="menu-item menu-item-reactæºç è§£æ"><a href="/categories/React/React%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90" rel="section"><i class="fab fa-react fa-fw"></i>Reactæºç è§£æ</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="æœç´¢..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://yoursite.com/jd-share/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/base/avatar.jpg"><meta itemprop="name" content="HuiAzir"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="HuiAzir"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">React Hooks + TypeScript å®æˆ˜è®°å½•</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">æ›´æ–°äº</span> <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-05-15 09:38:26" itemprop="dateModified" datetime="2020-05-15T09:38:26+08:00">2020-05-15</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/React/" itemprop="url" rel="index"><span itemprop="name">React</span></a> </span></span><span id="/jd-share/" class="post-meta-item leancloud_visitors" data-flag-title="React Hooks + TypeScript å®æˆ˜è®°å½•" title="é˜…è¯»æ¬¡æ•°"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span> <span class="leancloud-visitors-count"></span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">è¯„è®ºï¼š</span> <a title="valine" href="/jd-share/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/jd-share/" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="æœ¬æ–‡å­—æ•°"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">æœ¬æ–‡å­—æ•°ï¼š</span> <span>29k</span> </span><span class="post-meta-item" title="é˜…è¯»æ—¶é•¿"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span> <span>26 åˆ†é’Ÿ</span></span><div class="post-description">è®°å½• React Hooks + TypeScript å¼€å‘ç»„ä»¶åº“çš„ç»éªŒğŸ˜</div></div></header><div class="post-body" itemprop="articleBody"><h1 id="React-Hooks"><a href="#React-Hooks" class="headerlink" title="React Hooks"></a>React Hooks</h1><h2 id="ä»€ä¹ˆæ˜¯-Hooks"><a href="#ä»€ä¹ˆæ˜¯-Hooks" class="headerlink" title="ä»€ä¹ˆæ˜¯ Hooks"></a>ä»€ä¹ˆæ˜¯ Hooks</h2><ul><li><code>React</code> ä¸€ç›´éƒ½æå€¡ä½¿ç”¨å‡½æ•°ç»„ä»¶ï¼Œä½†æ˜¯æœ‰æ—¶å€™éœ€è¦ä½¿ç”¨ <code>state</code> æˆ–è€…å…¶ä»–ä¸€äº›åŠŸèƒ½æ—¶ï¼Œåªèƒ½ä½¿ç”¨ç±»ç»„ä»¶ï¼Œå› ä¸ºå‡½æ•°ç»„ä»¶æ²¡æœ‰å®ä¾‹ï¼Œæ²¡æœ‰ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåªæœ‰ç±»ç»„ä»¶æ‰æœ‰ã€‚</li><li><code>Hooks</code> æ˜¯ <code>React 16.8</code> æ–°å¢çš„ç‰¹æ€§ï¼Œå®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ <code>class</code> çš„æƒ…å†µä¸‹ä½¿ç”¨ <code>state</code> ä»¥åŠå…¶ä»–çš„ <code>React</code> ç‰¹æ€§ã€‚</li><li>å¦‚æœä½ åœ¨ç¼–å†™å‡½æ•°ç»„ä»¶å¹¶æ„è¯†åˆ°éœ€è¦å‘å…¶æ·»åŠ ä¸€äº› <code>state</code> ï¼Œä»¥å‰çš„åšæ³•æ˜¯å¿…é¡»å°†å…¶å®ƒè½¬åŒ–ä¸º <code>class</code> ã€‚ç°åœ¨ä½ å¯ä»¥ç›´æ¥åœ¨ç°æœ‰çš„å‡½æ•°ç»„ä»¶ä¸­ä½¿ç”¨ <code>Hooks</code> ã€‚</li><li><code>use</code> å¼€å¤´çš„ <code>React API</code> éƒ½æ˜¯ <code>Hooks</code>ã€‚</li></ul><h2 id="Hooks-è§£å†³äº†å“ªäº›é—®é¢˜"><a href="#Hooks-è§£å†³äº†å“ªäº›é—®é¢˜" class="headerlink" title="Hooks è§£å†³äº†å“ªäº›é—®é¢˜?"></a>Hooks è§£å†³äº†å“ªäº›é—®é¢˜?</h2><ul><li>çŠ¶æ€é€»è¾‘éš¾å¤ç”¨<ul><li>åœ¨ç»„ä»¶ä¹‹é—´å¤ç”¨çŠ¶æ€é€»è¾‘å¾ˆéš¾ï¼Œå¯èƒ½è¦ç”¨åˆ° <code>render props</code> ï¼ˆæ¸²æŸ“å±æ€§ï¼‰æˆ–è€… <code>HOC</code>ï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰ï¼Œä½†æ— è®ºæ˜¯æ¸²æŸ“å±æ€§ï¼Œè¿˜æ˜¯é«˜é˜¶ç»„ä»¶ï¼Œéƒ½ä¼šåœ¨åŸå…ˆçš„ç»„ä»¶å¤–åŒ…è£¹ä¸€å±‚çˆ¶å®¹å™¨ï¼ˆä¸€èˆ¬éƒ½æ˜¯ div å…ƒç´ ï¼‰ï¼Œ<strong>å¯¼è‡´å±‚çº§å†—ä½™</strong> ã€‚</li></ul></li><li>è¶‹å‘å¤æ‚éš¾ä»¥ç»´æŠ¤<ul><li>åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­æ··æ‚ä¸ç›¸å¹²çš„é€»è¾‘ï¼ˆå¦‚ï¼šåœ¨ <code>componentDidMount</code> ä¸­æ³¨å†Œäº‹ä»¶ä»¥åŠå…¶ä»–çš„é€»è¾‘ï¼Œåœ¨ <code>componentWillUnmount</code> ä¸­å¸è½½äº‹ä»¶ï¼Œè¿™æ ·åˆ†æ•£ä¸é›†ä¸­çš„å†™æ³•ï¼Œå¾ˆå®¹æ˜“å†™å‡º <code>Bug</code> ï¼‰ã€‚</li><li>ç±»ç»„ä»¶ä¸­åˆ°å¤„éƒ½æ˜¯å¯¹çŠ¶æ€çš„è®¿é—®å’Œå¤„ç†ï¼Œå¯¼è‡´ç»„ä»¶éš¾ä»¥æ‹†åˆ†æˆæ›´å°çš„ç»„ä»¶ã€‚</li></ul></li><li>this æŒ‡å‘é—®é¢˜<ul><li>çˆ¶ç»„ä»¶ç»™å­ç»„ä»¶ä¼ é€’å‡½æ•°æ—¶ï¼Œå¿…é¡»ç»‘å®š <code>this</code></li></ul></li></ul><h2 id="Hooks-ä¼˜åŠ¿"><a href="#Hooks-ä¼˜åŠ¿" class="headerlink" title="Hooks ä¼˜åŠ¿"></a>Hooks ä¼˜åŠ¿</h2><ul><li>èƒ½ä¼˜åŒ–ç±»ç»„ä»¶çš„ä¸‰å¤§é—®é¢˜</li><li>èƒ½åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘ï¼ˆè‡ªå®šä¹‰ Hooks ï¼‰</li><li>èƒ½å°†ç»„ä»¶ä¸­ç›¸äº’å…³è”çš„éƒ¨åˆ†æ‹†åˆ†æˆæ›´å°çš„å‡½æ•°ï¼ˆæ¯”å¦‚è®¾ç½®è®¢é˜…æˆ–è¯·æ±‚æ•°æ®ï¼‰</li><li>å‰¯ä½œç”¨çš„å…³æ³¨ç‚¹åˆ†ç¦»<ul><li>å‰¯ä½œç”¨æŒ‡é‚£äº›æ²¡æœ‰å‘ç”Ÿåœ¨æ•°æ®å‘è§†å›¾è½¬æ¢è¿‡ç¨‹ä¸­çš„é€»è¾‘ï¼Œå¦‚ <code>Ajax</code> è¯·æ±‚ã€è®¿é—®åŸç”Ÿ <code>DOM</code> å…ƒç´ ã€æœ¬åœ°æŒä¹…åŒ–ç¼“å­˜ã€ç»‘å®š/è§£ç»‘äº‹ä»¶ã€æ·»åŠ è®¢é˜…ã€è®¾ç½®å®šæ—¶å™¨ã€è®°å½•æ—¥å¿—ç­‰ã€‚ä»¥å¾€è¿™äº›å‰¯ä½œç”¨éƒ½æ˜¯å†™åœ¨ç±»ç»„ä»¶ç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­çš„ã€‚</li></ul></li></ul><h2 id="å¸¸ç”¨-Hooks"><a href="#å¸¸ç”¨-Hooks" class="headerlink" title="å¸¸ç”¨ Hooks"></a>å¸¸ç”¨ Hooks</h2><h3 id="useState"><a href="#useState" class="headerlink" title="useState"></a>useState</h3><ol><li><code>React</code> å‡è®¾å½“æˆ‘ä»¬å¤šæ¬¡è°ƒç”¨ <code>useState</code> çš„æ—¶å€™ï¼Œè¦ä¿è¯æ¯æ¬¡æ¸²æŸ“æ—¶å®ƒä»¬çš„è°ƒç”¨é¡ºåºæ˜¯ä¸å˜çš„ã€‚</li><li>é€šè¿‡åœ¨å‡½æ•°ç»„ä»¶é‡Œè°ƒç”¨å®ƒæ¥ç»™ç»„ä»¶æ·»åŠ ä¸€äº›å†…éƒ¨ <code>state</code> ï¼Œ<code>React</code> ä¼š åœ¨é‡å¤æ¸²æŸ“æ—¶ä¿ç•™è¿™ä¸ª state</li><li><code>useState</code> å”¯ä¸€çš„å‚æ•°å°±æ˜¯åˆå§‹ <code>state</code></li><li><code>useState</code> ä¼šè¿”å›ä¸€ä¸ªæ•°ç»„ï¼šä¸€ä¸ª <code>state</code> ï¼Œä¸€ä¸ªæ›´æ–° <code>state</code> çš„å‡½æ•°</li><li>åœ¨åˆå§‹åŒ–æ¸²æŸ“æœŸé—´ï¼Œè¿”å›çš„çŠ¶æ€ <code>state</code> ä¸ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•° <code>initialState</code> å€¼ç›¸åŒã€‚<br>æˆ‘ä»¬å¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨æ›´æ–° <code>state</code> çš„å‡½æ•°ã€‚å®ƒç±»ä¼¼ <code>class</code> ç»„ä»¶çš„ <code>this.setState</code>ï¼Œä½†æ˜¯å®ƒä¸ä¼šæŠŠæ–°çš„ <code>state</code> å’Œæ—§çš„ <code>state</code> è¿›è¡Œåˆå¹¶ï¼Œè€Œæ˜¯ç›´æ¥æ›¿æ¢ã€‚</li></ol><h4 id="ä½¿ç”¨æ–¹æ³•"><a href="#ä½¿ç”¨æ–¹æ³•" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [state, setState] = useState(initialState);</span><br></pre></td></tr></table></figure><p>ä¸¾ä¸ªä¾‹å­</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [counter, setCounter] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;p&gt;&#123;counter&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCounter(counter + 1)&#125;&gt;counter + 1&lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Counter;</span></span><br></pre></td></tr></table></figure><h4 id="æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é—­åŒ…"><a href="#æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é—­åŒ…" class="headerlink" title="æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é—­åŒ…"></a>æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é—­åŒ…</h4><ul><li>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„ Props å’Œ State</li><li>æ¯ä¸€æ¬¡æ¸²æŸ“éƒ½æœ‰å®ƒè‡ªå·±çš„äº‹ä»¶å¤„ç†å‡½æ•°</li><li>å½“ç‚¹å‡»æ›´æ–°çŠ¶æ€çš„æ—¶å€™ï¼Œå‡½æ•°ç»„ä»¶éƒ½ä¼šé‡æ–°è¢«è°ƒç”¨ï¼Œé‚£ä¹ˆæ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œå–åˆ°çš„å€¼ä¸ä¼šå—åé¢æ“ä½œçš„å½±å“</li></ul><p>ä¸¾ä¸ªä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [counter, setCounter] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">alertNumber</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// åªèƒ½è·å–åˆ°ç‚¹å‡»æŒ‰é’®æ—¶çš„é‚£ä¸ªçŠ¶æ€</span></span><br><span class="line">      alert(counter);</span><br><span class="line">    &#125;, <span class="number">3000</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;p&gt;&#123;counter&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCounter(counter + 1)&#125;&gt;counter + 1&lt;/</span>button&gt;</span><br><span class="line">      &lt;button onClick=&#123;alertNumber&#125;&gt;alertCounter&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å‡½æ•°å¼æ›´æ–°"><a href="#å‡½æ•°å¼æ›´æ–°" class="headerlink" title="å‡½æ•°å¼æ›´æ–°"></a>å‡½æ•°å¼æ›´æ–°</h4><p>å¦‚æœæ–°çš„ <code>state</code> éœ€è¦é€šè¿‡ä½¿ç”¨å…ˆå‰çš„ <code>state</code> è®¡ç®—å¾—å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å›è°ƒå‡½æ•°å½“åšå‚æ•°ä¼ é€’ç»™ <code>setState</code>ã€‚è¯¥å›è°ƒå‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„ <code>state</code>ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ã€‚</p><p>ä¸¾ä¸ªä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [counter, setCounter] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;p&gt;&#123;counter&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCounter(counter =&gt; counter + 10)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        counter + 10</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="æƒ°æ€§åˆå§‹åŒ–"><a href="#æƒ°æ€§åˆå§‹åŒ–" class="headerlink" title="æƒ°æ€§åˆå§‹åŒ–"></a>æƒ°æ€§åˆå§‹åŒ–</h4><ul><li><code>initialState</code> å‚æ•°åªä¼šåœ¨ç»„ä»¶çš„åˆå§‹åŒ–æ¸²æŸ“ä¸­èµ·ä½œç”¨ï¼Œåç»­æ¸²æŸ“æ—¶ä¼šè¢«å¿½ç•¥</li><li>å¦‚æœåˆå§‹ <code>state</code> éœ€è¦é€šè¿‡å¤æ‚è®¡ç®—è·å¾—ï¼Œåˆ™å¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å‡½æ•°ä¸­è®¡ç®—å¹¶è¿”å›åˆå§‹çš„ <code>state</code> ï¼Œæ­¤å‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶è¢«è°ƒç”¨</li></ul><p>ä¸¾ä¸ªä¾‹å­</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter4</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'Counter render'</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// è¿™ä¸ªå‡½æ•°åªåœ¨åˆå§‹æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ï¼Œåç»­æ›´æ–°çŠ¶æ€é‡æ–°æ¸²æŸ“ç»„ä»¶æ—¶ï¼Œè¯¥å‡½æ•°å°±ä¸ä¼šå†è¢«è°ƒç”¨</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getInitState</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'getInitState'</span>);</span><br><span class="line">    <span class="comment">// å¤æ‚çš„è®¡ç®—</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> [counter, setCounter] = useState(getInitState);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;&gt;</span><br><span class="line">      &lt;p&gt;&#123;counter&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCounter(counter + 1)&#125;&gt;+1&lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><ul><li>effectï¼ˆå‰¯ä½œç”¨ï¼‰ï¼šæŒ‡é‚£äº›æ²¡æœ‰å‘ç”Ÿåœ¨æ•°æ®å‘è§†å›¾è½¬æ¢è¿‡ç¨‹ä¸­çš„é€»è¾‘ï¼Œå¦‚ ajax è¯·æ±‚ã€è®¿é—®åŸç”Ÿdom å…ƒç´ ã€æœ¬åœ°æŒä¹…åŒ–ç¼“å­˜ã€ç»‘å®š/è§£ç»‘äº‹ä»¶ã€æ·»åŠ è®¢é˜…ã€è®¾ç½®å®šæ—¶å™¨ã€è®°å½•æ—¥å¿—ç­‰ã€‚</li><li>å‰¯ä½œç”¨æ“ä½œå¯ä»¥åˆ†ä¸¤ç±»ï¼šéœ€è¦æ¸…é™¤çš„å’Œä¸éœ€è¦æ¸…é™¤çš„ã€‚</li><li>åŸå…ˆåœ¨å‡½æ•°ç»„ä»¶å†…ï¼ˆè¿™é‡ŒæŒ‡åœ¨ React æ¸²æŸ“é˜¶æ®µï¼‰æ”¹å˜ dom ã€å‘é€ ajax è¯·æ±‚ä»¥åŠæ‰§è¡Œå…¶ä»–åŒ…å«å‰¯ä½œç”¨çš„æ“ä½œéƒ½æ˜¯ä¸è¢«å…è®¸çš„ï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šäº§ç”Ÿè«åå…¶å¦™çš„ bug å¹¶ç ´å UI çš„ä¸€è‡´æ€§</li><li>useEffect å°±æ˜¯ä¸€ä¸ª Effect Hookï¼Œç»™å‡½æ•°ç»„ä»¶å¢åŠ äº†æ“ä½œå‰¯ä½œç”¨çš„èƒ½åŠ›ã€‚å®ƒè·Ÿ class ç»„ä»¶ä¸­çš„ componentDidMountã€componentDidUpdate å’Œ componentWillUnmount å…·æœ‰ç›¸åŒçš„ç”¨é€”ï¼Œåªä¸è¿‡è¢«åˆå¹¶æˆäº†ä¸€ä¸ª API</li><li>useEffect æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¹‹åæ‰æ‰§è¡Œï¼Œè¯¥å‡½æ•°æœ‰è¦æ±‚ï¼šè¦ä¹ˆè¿”å›ä¸€ä¸ªèƒ½æ¸…é™¤å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œè¦ä¹ˆå°±ä¸è¿”å›ä»»ä½•å†…å®¹</li><li>ä¸ componentDidMount æˆ– componentDidUpdate ä¸åŒï¼Œä½¿ç”¨ useEffect è°ƒåº¦çš„ effect ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œeffect ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œæœ‰å•ç‹¬çš„ useLayoutEffect Hook ä¾›ä½ ä½¿ç”¨ï¼Œå…¶ API ä¸ useEffect ç›¸åŒã€‚</li></ul><h4 id="ä½¿ç”¨æ–¹æ³•-1"><a href="#ä½¿ç”¨æ–¹æ³•-1" class="headerlink" title="ä½¿ç”¨æ–¹æ³•"></a>ä½¿ç”¨æ–¹æ³•</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> App =&gt; <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;)</span><br><span class="line">  <span class="comment">// æˆ–è€…</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;&#125;,[...])</span><br><span class="line">  <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;&gt;</span><span class="tag">&lt;/&gt;</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-class-ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜"><a href="#ä½¿ç”¨-class-ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜" class="headerlink" title="ä½¿ç”¨ class ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜"></a>ä½¿ç”¨ class ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜</h4><p>åœ¨è¿™ä¸ª class ä¸­ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ä¸¤ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­ç¼–å†™é‡å¤çš„ä»£ç ï¼Œè¿™æ˜¯å› ä¸ºå¾ˆå¤šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç»„ä»¶åŠ è½½å’Œæ›´æ–°æ—¶æ‰§è¡ŒåŒæ ·çš„æ“ä½œã€‚æˆ‘ä»¬å¸Œæœ›å®ƒåœ¨æ¯æ¬¡æ¸²æŸ“ä¹‹åæ‰§è¡Œï¼Œä½† React çš„ class ç»„ä»¶æ²¡æœ‰æä¾›è¿™æ ·çš„æ–¹æ³•ã€‚å³ä½¿æˆ‘ä»¬æå–å‡ºä¸€ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦åœ¨ä¸¤ä¸ªåœ°æ–¹è°ƒç”¨å®ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span></span>&#123;</span><br><span class="line">    state = &#123;<span class="attr">number</span>:<span class="number">0</span>&#125;;</span><br><span class="line">    add = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;<span class="attr">number</span>:<span class="keyword">this</span>.state.number+<span class="number">1</span>&#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    componentDidMount()&#123;</span><br><span class="line">        <span class="keyword">this</span>.changeTitle();</span><br><span class="line">    &#125;</span><br><span class="line">    componentDidUpdate()&#123;</span><br><span class="line">        <span class="keyword">this</span>.changeTitle();</span><br><span class="line">    &#125;</span><br><span class="line">    changeTitle = <span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">`ä½ å·²ç»ç‚¹å‡»äº†<span class="subst">$&#123;<span class="keyword">this</span>.state.number&#125;</span>æ¬¡`</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;&gt;</span><br><span class="line">              &lt;p&gt;&#123;<span class="keyword">this</span>.state.number&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">              &lt;button onClick=&#123;this.add&#125;&gt;+&lt;/</span>button&gt;</span><br><span class="line">            &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">        )</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨-useEffect-ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜"><a href="#ä½¿ç”¨-useEffect-ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜" class="headerlink" title="ä½¿ç”¨ useEffect ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜"></a>ä½¿ç”¨ useEffect ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [number,setNumber] = useState(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// useEffecté‡Œé¢çš„è¿™ä¸ªå‡½æ•°ä¼šåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ›´æ–°å®Œæˆåæ‰§è¡Œ</span></span><br><span class="line">    <span class="comment">// ç›¸å½“äº componentDidMount å’Œ componentDidUpdate:</span></span><br><span class="line">    useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">`ä½ ç‚¹å‡»äº†<span class="subst">$&#123;number&#125;</span>æ¬¡`</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;p&gt;&#123;number&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;setNumber(number+1)&#125;&gt;+&lt;/</span>button&gt;</span><br><span class="line">        &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><p><strong>useEffect åšäº†ä»€ä¹ˆï¼Ÿ</strong> é€šè¿‡ä½¿ç”¨è¿™ä¸ª Hookï¼Œä½ å¯ä»¥å‘Šè¯‰ React ç»„ä»¶éœ€è¦åœ¨æ¸²æŸ“åæ‰§è¡ŒæŸäº›æ“ä½œã€‚React ä¼šä¿å­˜ä½ ä¼ é€’çš„å‡½æ•°ï¼ˆæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º â€œeffectâ€ï¼‰ï¼Œå¹¶ä¸”åœ¨æ‰§è¡Œ DOM æ›´æ–°ä¹‹åè°ƒç”¨å®ƒã€‚åœ¨è¿™ä¸ª effect ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº† document çš„ title å±æ€§ï¼Œä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥æ‰§è¡Œæ•°æ®è·å–æˆ–è°ƒç”¨å…¶ä»–å‘½ä»¤å¼çš„ APIã€‚</p><p><strong>ä¸ºä»€ä¹ˆåœ¨ç»„ä»¶å†…éƒ¨è°ƒç”¨ useEffectï¼Ÿ</strong> å°† useEffect æ”¾åœ¨ç»„ä»¶å†…éƒ¨è®©æˆ‘ä»¬å¯ä»¥åœ¨ effect ä¸­ç›´æ¥è®¿é—® count state å˜é‡ï¼ˆæˆ–å…¶ä»– propsï¼‰ã€‚æˆ‘ä»¬ä¸éœ€è¦ç‰¹æ®Šçš„ API æ¥è¯»å–å®ƒ â€”â€” å®ƒå·²ç»ä¿å­˜åœ¨å‡½æ•°ä½œç”¨åŸŸä¸­ã€‚Hook ä½¿ç”¨äº† JavaScript çš„é—­åŒ…æœºåˆ¶ï¼Œè€Œä¸ç”¨åœ¨ JavaScript å·²ç»æä¾›äº†è§£å†³æ–¹æ¡ˆçš„æƒ…å†µä¸‹ï¼Œè¿˜å¼•å…¥ç‰¹å®šçš„ React APIã€‚</p><p><strong>useEffect ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œå—ï¼Ÿ</strong> æ˜¯çš„ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åéƒ½ä¼šæ‰§è¡Œã€‚ï¼ˆæˆ‘ä»¬ç¨åä¼šè°ˆåˆ°å¦‚ä½•æ§åˆ¶å®ƒï¼‰ä½ å¯èƒ½ä¼šæ›´å®¹æ˜“æ¥å— effect å‘ç”Ÿåœ¨â€œæ¸²æŸ“ä¹‹åâ€è¿™ç§æ¦‚å¿µï¼Œä¸ç”¨å†å»è€ƒè™‘â€œæŒ‚è½½â€è¿˜æ˜¯â€œæ›´æ–°â€ã€‚React ä¿è¯äº†æ¯æ¬¡è¿è¡Œ effect çš„åŒæ—¶ï¼ŒDOM éƒ½å·²ç»æ›´æ–°å®Œæ¯•ã€‚</p><h4 id="æ¸…é™¤å‰¯ä½œç”¨"><a href="#æ¸…é™¤å‰¯ä½œç”¨" class="headerlink" title="æ¸…é™¤å‰¯ä½œç”¨"></a>æ¸…é™¤å‰¯ä½œç”¨</h4><ul><li>å‰¯ä½œç”¨å‡½æ•°è¿˜å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªå‡½æ•°æ¥æŒ‡å®šå¦‚ä½•æ¸…é™¤å‰¯ä½œç”¨ï¼Œä¸ºé˜²æ­¢å†…å­˜æ³„æ¼ï¼Œæ¸…é™¤å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½å‰æ‰§è¡Œã€‚å¦‚æœç»„ä»¶å¤šæ¬¡æ¸²æŸ“ï¼Œåˆ™åœ¨æ‰§è¡Œä¸‹ä¸€ä¸ª effect ä¹‹å‰ï¼Œä¸Šä¸€ä¸ª effect å°±å·²è¢«æ¸…é™¤ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [number,setNumber] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">let</span> [text,setText] = useState(<span class="string">''</span>);</span><br><span class="line">  <span class="comment">// ç›¸å½“äºcomponentDidMount å’Œ componentDidUpdate</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'å¼€å¯ä¸€ä¸ªæ–°çš„å®šæ—¶å™¨'</span>)</span><br><span class="line">      <span class="keyword">let</span> timer = setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">          setNumber(<span class="function"><span class="params">number</span>=&gt;</span>number+<span class="number">1</span>);</span><br><span class="line">      &#125;,<span class="number">1000</span>);</span><br><span class="line">      <span class="comment">// useEffect å¦‚æœè¿”å›ä¸€ä¸ªå‡½æ•°çš„è¯ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ç»„ä»¶å¸è½½å’Œæ›´æ–°æ—¶è°ƒç”¨</span></span><br><span class="line">      <span class="comment">// useEffect åœ¨æ‰§è¡Œå‰¯ä½œç”¨å‡½æ•°ä¹‹å‰ï¼Œä¼šå…ˆè°ƒç”¨ä¸Šä¸€æ¬¡è¿”å›çš„å‡½æ•°</span></span><br><span class="line">      <span class="comment">// å¦‚æœè¦æ¸…é™¤å‰¯ä½œç”¨ï¼Œè¦ä¹ˆè¿”å›ä¸€ä¸ªæ¸…é™¤å‰¯ä½œç”¨çš„å‡½æ•°</span></span><br><span class="line">      <span class="comment">// return ()=&gt;&#123;</span></span><br><span class="line">      <span class="comment">//     console.log('destroy effect');</span></span><br><span class="line">      <span class="comment">//     clearInterval($timer);</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// &#125;,[]);//è¦ä¹ˆåœ¨è¿™é‡Œä¼ å…¥ä¸€ä¸ªç©ºçš„ä¾èµ–é¡¹æ•°ç»„ï¼Œè¿™æ ·å°±ä¸ä¼šå»é‡å¤æ‰§è¡Œ</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">        &lt;input value=&#123;text&#125; onChange=&#123;(event)=&gt;setText(event.target.value)&#125;/&gt;</span><br><span class="line">        &lt;p&gt;&#123;number&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;+&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="è·³è¿‡-Effect-è¿›è¡Œæ€§èƒ½ä¼˜åŒ–"><a href="#è·³è¿‡-Effect-è¿›è¡Œæ€§èƒ½ä¼˜åŒ–" class="headerlink" title="è·³è¿‡ Effect è¿›è¡Œæ€§èƒ½ä¼˜åŒ–"></a>è·³è¿‡ Effect è¿›è¡Œæ€§èƒ½ä¼˜åŒ–</h4><ul><li>ä¾èµ–é¡¹æ•°ç»„æ§åˆ¶ç€ useEffect çš„æ‰§è¡Œ</li><li>å¦‚æœæŸäº›ç‰¹å®šå€¼åœ¨ä¸¤æ¬¡é‡æ¸²æŸ“ä¹‹é—´æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½ å¯ä»¥é€šçŸ¥ React è·³è¿‡å¯¹ effect çš„è°ƒç”¨ï¼Œåªè¦ä¼ é€’æ•°ç»„ä½œä¸º useEffect çš„ç¬¬äºŒä¸ªå¯é€‰å‚æ•°å³å¯</li><li>å¦‚æœæƒ³æ‰§è¡Œåªè¿è¡Œä¸€æ¬¡çš„ effectï¼ˆä»…åœ¨ç»„ä»¶æŒ‚è½½æ—¶æ‰§è¡Œï¼‰ï¼Œå¯ä»¥ä¼ é€’ä¸€ä¸ªç©ºæ•°ç»„ï¼ˆ[]ï¼‰ä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚è¿™å°±å‘Šè¯‰ React ä½ çš„ effect ä¸ä¾èµ–äº props æˆ– state ä¸­çš„ä»»ä½•å€¼ï¼Œæ‰€ä»¥å®ƒæ°¸è¿œéƒ½ä¸éœ€è¦é‡å¤æ‰§è¡Œ</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [number,setNumber] = useState(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">let</span> [text,setText] = useState(<span class="string">''</span>);</span><br><span class="line">  <span class="comment">// ç›¸å½“äºcomponentDidMount å’Œ componentDidUpdate</span></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'useEffect'</span>);</span><br><span class="line">      <span class="keyword">let</span> timer = setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">          setNumber(<span class="function"><span class="params">number</span>=&gt;</span>number+<span class="number">1</span>);</span><br><span class="line">      &#125;,<span class="number">1000</span>);</span><br><span class="line">  &#125;,[text]);<span class="comment">// æ•°ç»„è¡¨ç¤º effect ä¾èµ–çš„å˜é‡ï¼Œåªæœ‰å½“è¿™ä¸ªå˜é‡å‘ç”Ÿæ”¹å˜ä¹‹åæ‰ä¼šé‡æ–°æ‰§è¡Œ efffect å‡½æ•°</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;&gt;</span><br><span class="line">        &lt;input value=&#123;text&#125; onChange=&#123;(e)=&gt;setText(e.target.value)&#125;/&gt;</span><br><span class="line">        &lt;p&gt;&#123;number&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button&gt;+&lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ä½¿ç”¨å¤šä¸ª-Effect-å®ç°å…³æ³¨ç‚¹åˆ†ç¦»"><a href="#ä½¿ç”¨å¤šä¸ª-Effect-å®ç°å…³æ³¨ç‚¹åˆ†ç¦»" class="headerlink" title="ä½¿ç”¨å¤šä¸ª Effect å®ç°å…³æ³¨ç‚¹åˆ†ç¦»"></a>ä½¿ç”¨å¤šä¸ª Effect å®ç°å…³æ³¨ç‚¹åˆ†ç¦»</h4><ul><li>ä½¿ç”¨ Hook å…¶ä¸­ä¸€ä¸ªç›®çš„å°±æ˜¯è¦è§£å†³ class ä¸­ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç»å¸¸åŒ…å«ä¸ç›¸å…³çš„é€»è¾‘ï¼Œä½†åˆæŠŠç›¸å…³é€»è¾‘åˆ†ç¦»åˆ°äº†å‡ ä¸ªä¸åŒæ–¹æ³•ä¸­çš„é—®é¢˜ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// classç‰ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FriendStatusWithCounter</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123; <span class="attr">count</span>: <span class="number">0</span>, <span class="attr">isOnline</span>: <span class="literal">null</span> &#125;;</span><br><span class="line">    <span class="keyword">this</span>.handleStatusChange = <span class="keyword">this</span>.handleStatusChange.bind(<span class="keyword">this</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="keyword">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">    ChatAPI.subscribeToFriendStatus(</span><br><span class="line">      <span class="keyword">this</span>.props.friend.id,</span><br><span class="line">      <span class="keyword">this</span>.handleStatusChange</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="keyword">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentWillUnmount() &#123;</span><br><span class="line">    ChatAPI.unsubscribeFromFriendStatus(</span><br><span class="line">      <span class="keyword">this</span>.props.friend.id,</span><br><span class="line">      <span class="keyword">this</span>.handleStatusChange</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  handleStatusChange(status) &#123;</span><br><span class="line">    <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">      isOnline: status.isOnline</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// ...</span></span><br></pre></td></tr></table></figure><ul><li><p>æˆ‘ä»¬å¯ä»¥å‘ç° document.title çš„é€»è¾‘æ˜¯å¦‚ä½•è¢«åˆ†å‰²åˆ° <code>componentDidMount</code> å’Œ <code>componentDidUpdate</code> ä¸­çš„ï¼Œè®¢é˜…é€»è¾‘åˆæ˜¯å¦‚ä½•è¢«åˆ†å‰²åˆ° <code>componentDidMount</code> å’Œ <code>componentWillUnmount</code> ä¸­çš„ã€‚è€Œä¸” <code>componentDidMount</code> ä¸­åŒæ—¶åŒ…å«äº†ä¸¤ä¸ªä¸åŒåŠŸèƒ½çš„ä»£ç ã€‚è¿™æ ·ä¼šä½¿å¾—ç”Ÿå‘½å‘¨æœŸå‡½æ•°å¾ˆæ··ä¹±ã€‚</p></li><li><p>Hook å…è®¸æˆ‘ä»¬æŒ‰ç…§ä»£ç çš„ç”¨é€”åˆ†ç¦»ä»–ä»¬ï¼Œ è€Œä¸æ˜¯åƒç”Ÿå‘½å‘¨æœŸå‡½æ•°é‚£æ ·ã€‚<code>React</code> å°†æŒ‰ç…§ <code>effect</code> å£°æ˜çš„é¡ºåºä¾æ¬¡è°ƒç”¨ç»„ä»¶ä¸­çš„ æ¯ä¸€ä¸ª <code>effect</code>ã€‚</p></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Hooks ç‰ˆ</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">FriendStatusWithCounter</span>(<span class="params">props</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> [isOnline, setIsOnline] = useState(<span class="literal">null</span>);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">      setIsOnline(status.isOnline);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="useContext"><a href="#useContext" class="headerlink" title="useContext"></a>useContext</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> value = useContext(MyContext);</span><br></pre></td></tr></table></figure><p>æ¥æ”¶ä¸€ä¸ª <code>context</code> å¯¹è±¡ï¼ˆReact.createContext çš„è¿”å›å€¼ï¼‰å¹¶è¿”å›è¯¥ <code>context</code> çš„å½“å‰å€¼ã€‚å½“å‰çš„ <code>context</code> å€¼ç”±ä¸Šå±‚ç»„ä»¶ä¸­è·ç¦»å½“å‰ç»„ä»¶æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> çš„ value prop å†³å®šã€‚</p><p>å½“ç»„ä»¶ä¸Šå±‚æœ€è¿‘çš„ <code>&lt;MyContext.Provider&gt;</code> æ›´æ–°æ—¶ï¼Œè¯¥ <code>Hook</code> ä¼šè§¦å‘é‡æ¸²æŸ“ï¼Œå¹¶ä½¿ç”¨æœ€æ–°ä¼ é€’ç»™ <code>MyContext provider</code> çš„ <code>context value</code> å€¼ã€‚å³ä½¿ç¥–å…ˆä½¿ç”¨ <code>React.memo</code> æˆ– <code>shouldComponentUpdate</code>ï¼Œä¹Ÿä¼šåœ¨ç»„ä»¶æœ¬èº«ä½¿ç”¨ <code>useContext</code> æ—¶é‡æ–°æ¸²æŸ“ã€‚</p><p>åˆ«å¿˜è®° useContext çš„å‚æ•°å¿…é¡»æ˜¯ context å¯¹è±¡æœ¬èº«ï¼š</p><ul><li>æ­£ç¡®ï¼š <strong><code>useContext(MyContext)</code></strong></li><li>é”™è¯¯ï¼š <code>useContext(MyContext.Consumer)</code></li><li>é”™è¯¯ï¼š <code>useContext(MyContext.Provider)</code></li></ul><blockquote><p>æç¤º<br>å¦‚æœä½ åœ¨æ¥è§¦ <code>Hook</code> å‰å·²ç»å¯¹ <code>context API</code> æ¯”è¾ƒç†Ÿæ‚‰ï¼Œé‚£åº”è¯¥å¯ä»¥ç†è§£ï¼Œ<code>useContext(MyContext)</code> ç›¸å½“äº <code>class</code> ç»„ä»¶ä¸­çš„ <code>static contextType = MyContext</code> æˆ–è€… <code>&lt;MyContext.Consumer&gt;</code>ã€‚<br><code>useContext(MyContext)</code> åªæ˜¯è®©ä½ èƒ½å¤Ÿè¯»å– <code>context</code> çš„å€¼ä»¥åŠè®¢é˜… <code>context</code> çš„å˜åŒ–ã€‚ä½ ä»ç„¶éœ€è¦åœ¨ä¸Šå±‚ç»„ä»¶æ ‘ä¸­ä½¿ç”¨ <code>&lt;MyContext.Provider&gt;</code> æ¥ä¸ºä¸‹å±‚ç»„ä»¶æä¾› <code>contextã€‚</code></p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> themes = &#123;</span><br><span class="line">  light: &#123;</span><br><span class="line">    foreground: <span class="string">"#000000"</span>,</span><br><span class="line">    background: <span class="string">"#eeeeee"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  dark: &#123;</span><br><span class="line">    foreground: <span class="string">"#ffffff"</span>,</span><br><span class="line">    background: <span class="string">"#222222"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ThemeContext = React.createContext(themes.light);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ThemeContext.Provider value=&#123;themes.light&#125;&gt;</span><br><span class="line">      &lt;Toolbar /&gt;</span><br><span class="line">    &lt;<span class="regexp">/ThemeContext.Provider&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function Toolbar(props) &#123;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;ThemedButton /</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">function ThemedButton() &#123;</span></span><br><span class="line"><span class="regexp">  const theme = useContext(ThemeContext);</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">    &lt;button style=&#123;&#123; background: theme.background, color: theme.foreground &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">      I am styled by theme context!</span></span><br><span class="line"><span class="regexp">    &lt;/</span>button&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="è‡ªå®šä¹‰-Hooks"><a href="#è‡ªå®šä¹‰-Hooks" class="headerlink" title="è‡ªå®šä¹‰ Hooks"></a>è‡ªå®šä¹‰ Hooks</h3><ul><li>è‡ªå®šä¹‰ Hook æ›´åƒæ˜¯ä¸€ç§çº¦å®šï¼Œè€Œä¸æ˜¯ä¸€ç§åŠŸèƒ½ã€‚å¦‚æœå‡½æ•°çš„åå­—ä»¥ use å¼€å¤´ï¼Œå¹¶ä¸”è°ƒç”¨äº†å…¶ä»–çš„ Hookï¼Œåˆ™å°±ç§°å…¶ä¸ºä¸€ä¸ªè‡ªå®šä¹‰ Hook</li><li>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šæƒ³è¦åœ¨ç»„ä»¶ä¹‹é—´é‡ç”¨ä¸€äº›çŠ¶æ€é€»è¾‘ï¼Œä¹‹å‰è¦ä¹ˆç”¨ render props ï¼Œè¦ä¹ˆç”¨é«˜é˜¶ç»„ä»¶ï¼Œè¦ä¹ˆä½¿ç”¨ redux</li><li>è‡ªå®šä¹‰ Hook å¯ä»¥è®©ä½ åœ¨ä¸å¢åŠ ç»„ä»¶çš„æƒ…å†µä¸‹è¾¾åˆ°åŒæ ·çš„ç›®çš„</li><li>Hook æ˜¯ä¸€ç§å¤ç”¨çŠ¶æ€é€»è¾‘çš„æ–¹å¼ï¼Œå®ƒä¸å¤ç”¨ state æœ¬èº«</li><li>äº‹å®ä¸Š Hook çš„æ¯æ¬¡è°ƒç”¨éƒ½æœ‰ä¸€ä¸ªå®Œå…¨ç‹¬ç«‹çš„ state</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useNumber</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">let</span> [number,setNumber] = useState(<span class="number">0</span>);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">    setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">        setNumber(<span class="function"><span class="params">number</span>=&gt;</span>number+<span class="number">1</span>);</span><br><span class="line">    &#125;,<span class="number">1000</span>);</span><br><span class="line">  &#125;,[]);</span><br><span class="line">  <span class="keyword">return</span> [number,setNumber];</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// æ¯ä¸ªç»„ä»¶è°ƒç”¨åŒä¸€ä¸ª hookï¼Œåªæ˜¯å¤ç”¨ hook çš„çŠ¶æ€é€»è¾‘ï¼Œå¹¶ä¸ä¼šå…±ç”¨ä¸€ä¸ªçŠ¶æ€</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> [number,setNumber] = useNumber();</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;<span class="xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="xml">            setNumber(number+1)</span></span><br><span class="line"><span class="xml">        &#125;&#125;&gt;&#123;number&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">function Counter2()&#123;</span></span><br><span class="line"><span class="regexp">    let [number,setNumber] = useNumber();</span></span><br><span class="line"><span class="regexp">    return (</span></span><br><span class="line"><span class="regexp">        &lt;div&gt;&lt;button  onClick=&#123;()=&gt;&#123;</span></span><br><span class="line"><span class="regexp">            setNumber(number+1)</span></span><br><span class="line"><span class="regexp">        &#125;&#125;&gt;&#123;number&#125;&lt;/</span>button&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="useMemoã€useCallback"><a href="#useMemoã€useCallback" class="headerlink" title="useMemoã€useCallback"></a>useMemoã€useCallback</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedCallback = useCallback(</span><br><span class="line">  () =&gt; &#123;</span><br><span class="line">    doSomething(a, b);</span><br><span class="line">  &#125;,</span><br><span class="line">  [a, b],</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>åœ¨<code>a</code>å’Œ<code>b</code>çš„å˜é‡å€¼ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ<code>memoizedCallback</code>çš„å¼•ç”¨ä¸å˜ã€‚å³ï¼š<code>useCallback</code>çš„ç¬¬ä¸€ä¸ªå…¥å‚å‡½æ•°ä¼šè¢«ç¼“å­˜ï¼Œä»è€Œè¾¾åˆ°æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–çš„ç›®çš„ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> memoizedValue = useMemo(<span class="function"><span class="params">()</span> =&gt;</span> computeExpensiveValue(a, b), [a, b]);</span><br></pre></td></tr></table></figure><p>åœ¨<code>a</code>å’Œ<code>b</code>çš„å˜é‡å€¼ä¸å˜çš„æƒ…å†µä¸‹ï¼Œ<code>memoizedValue</code>çš„å€¼ä¸å˜ã€‚å³ï¼š<code>useMemo</code>å‡½æ•°çš„ç¬¬ä¸€ä¸ªå…¥å‚å‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°èŠ‚çœè®¡ç®—é‡çš„ç›®çš„ã€‚</p><h4 id="æ€§èƒ½ä¼˜åŒ–"><a href="#æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="æ€§èƒ½ä¼˜åŒ–"></a>æ€§èƒ½ä¼˜åŒ–</h4><h5 id="Object-isæµ…æ¯”è¾ƒ"><a href="#Object-isæµ…æ¯”è¾ƒ" class="headerlink" title="Object.isæµ…æ¯”è¾ƒ"></a>Object.isæµ…æ¯”è¾ƒ</h5><ul><li>Hook å†…éƒ¨ä½¿ç”¨ <code>Object.is</code> æ¥æ¯”è¾ƒæ–°æ—§ <code>state</code> æ˜¯å¦ç›¸ç­‰ã€‚</li><li>ä¸ <code>class</code> ç»„ä»¶ä¸­çš„ <code>setState</code> æ–¹æ³•ä¸åŒï¼Œå¦‚æœä½ ä¿®æ”¹çŠ¶æ€çš„æ—¶å€™ï¼Œä¼ çš„çŠ¶æ€å€¼æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸é‡æ–°æ¸²æŸ“ã€‚</li><li>ä¸ <code>class</code> ç»„ä»¶ä¸­çš„ <code>setState</code> æ–¹æ³•ä¸åŒï¼Œ<code>useState</code> ä¸ä¼šè‡ªåŠ¨åˆå¹¶æ›´æ–°å¯¹è±¡ã€‚ä½ å¯ä»¥ç”¨å‡½æ•°å¼çš„ <code>setState</code> ç»“åˆå±•å¼€è¿ç®—ç¬¦æ¥è¾¾åˆ°åˆå¹¶æ›´æ–°å¯¹è±¡çš„æ•ˆæœã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Counter</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">const</span> [counter,setCounter] = useState(&#123;<span class="attr">name</span>:<span class="string">'è®¡æ•°å™¨'</span>,<span class="attr">number</span>:<span class="number">0</span>&#125;);</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'render Counter'</span>)</span><br><span class="line">    <span class="comment">// å¦‚æœä½ ä¿®æ”¹çŠ¶æ€çš„æ—¶å€™ï¼Œä¼ çš„çŠ¶æ€å€¼æ²¡æœ‰å˜åŒ–ï¼Œåˆ™ä¸é‡æ–°æ¸²æŸ“</span></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;&gt;</span><br><span class="line">            &lt;p&gt;&#123;counter.name&#125;:&#123;counter.number&#125;&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">            &lt;button onClick=&#123;()=&gt;setCounter(&#123;...counter,number:counter.number+1&#125;)&#125;&gt;+&lt;/</span>button&gt;</span><br><span class="line">            &lt;button onClick=&#123;()=&gt;setCounter(counter)&#125;&gt;++&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="å‡å°‘æ¸²æŸ“æ¬¡æ•°"><a href="#å‡å°‘æ¸²æŸ“æ¬¡æ•°" class="headerlink" title="å‡å°‘æ¸²æŸ“æ¬¡æ•°"></a>å‡å°‘æ¸²æŸ“æ¬¡æ•°</h5><ul><li>é»˜è®¤æƒ…å†µï¼Œåªè¦çˆ¶ç»„ä»¶çŠ¶æ€å˜äº†ï¼ˆä¸ç®¡å­ç»„ä»¶ä¾ä¸ä¾èµ–è¯¥çŠ¶æ€ï¼‰ï¼Œå­ç»„ä»¶ä¹Ÿä¼šé‡æ–°æ¸²æŸ“</li><li>ä¸€èˆ¬çš„ä¼˜åŒ–ï¼š<ul><li>ç±»ç»„ä»¶ï¼šå¯ä»¥ä½¿ç”¨ <code>pureComponent</code> ï¼›</li><li>å‡½æ•°ç»„ä»¶ï¼šä½¿ç”¨ <code>React.memo</code> ï¼Œå°†å‡½æ•°ç»„ä»¶ä¼ é€’ç»™ <code>memo</code> ä¹‹åï¼Œå°±ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œæ–°ç»„ä»¶çš„åŠŸèƒ½ï¼š<strong>å¦‚æœæ¥å—åˆ°çš„å±æ€§ä¸å˜ï¼Œåˆ™ä¸é‡æ–°æ¸²æŸ“å‡½æ•°</strong>ã€‚</li></ul></li><li>ä½†æ˜¯æ€ä¹ˆä¿è¯å±æ€§ä¸ä¼šå˜å‘¢ï¼Ÿè¿™é‡Œä½¿ç”¨ <code>useState</code> ï¼Œæ¯æ¬¡æ›´æ–°éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œ<code>const [number,setNumber] = useState(0)</code> ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡éƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å€¼ï¼ˆå“ªæ€•è¿™ä¸ªå€¼æ²¡æœ‰å˜åŒ–ï¼‰ï¼Œå³ä½¿ä½¿ç”¨äº† React.memo ï¼Œä¹Ÿè¿˜æ˜¯ä¼šé‡æ–°æ¸²æŸ“ã€‚</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SubCounter = React.memo(<span class="function">(<span class="params">&#123;onClick,data&#125;</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'SubCounter render'</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;onClick&#125;&gt;&#123;data.number&#125;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br><span class="line"><span class="regexp">const ParentCounter = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  console.log('ParentCounter render');</span></span><br><span class="line"><span class="regexp">  const [name,setName]= useState('è®¡æ•°å™¨');</span></span><br><span class="line"><span class="regexp">  const [number,setNumber] = useState(0);</span></span><br><span class="line"><span class="regexp">  const data =&#123;number&#125;;</span></span><br><span class="line"><span class="regexp">  const addClick = ()=&gt;&#123;</span></span><br><span class="line"><span class="regexp">      setNumber(number+1);</span></span><br><span class="line"><span class="regexp">  &#125;;</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">      &lt;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;input type="text" value=&#123;name&#125; onChange=&#123;(e)=&gt;setName(e.target.value)&#125;/</span>&gt;</span><br><span class="line">          &lt;SubCounter data=&#123;data&#125; onClick=&#123;addClick&#125;/&gt;</span><br><span class="line">      &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><ul><li>æ›´æ·±å…¥çš„ä¼˜åŒ–-ä½¿ç”¨ <code>useMemo</code> &amp; <code>useCallback</code></li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SubCounter = React.memo(<span class="function">(<span class="params">&#123;onClick,data&#125;</span>) =&gt;</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'SubCounter render'</span>);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">      &lt;button onClick=&#123;onClick&#125;&gt;&#123;data.number&#125;&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;)</span></span><br><span class="line"><span class="regexp">const ParentCounter = () =&gt; &#123;</span></span><br><span class="line"><span class="regexp">  console.log('ParentCounter render');</span></span><br><span class="line"><span class="regexp">  const [name,setName]= useState('è®¡æ•°å™¨');</span></span><br><span class="line"><span class="regexp">  const [number, setNumber] = useState(0);</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ çˆ¶ç»„ä»¶æ›´æ–°æ—¶ï¼Œè¿™é‡Œçš„å˜é‡å’Œå‡½æ•°æ¯æ¬¡éƒ½ä¼šé‡æ–°åˆ›å»ºï¼Œé‚£ä¹ˆå­ç»„ä»¶æ¥å—åˆ°çš„å±æ€§æ¯æ¬¡éƒ½ä¼šè®¤ä¸ºæ˜¯æ–°çš„</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ æ‰€ä»¥å­ç»„ä»¶ä¹Ÿä¼šéšä¹‹æ›´æ–°ï¼Œè¿™æ—¶å€™å¯ä»¥ç”¨åˆ° useMemo</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ æœ‰æ²¡æœ‰åé¢çš„ä¾èµ–é¡¹æ•°ç»„å¾ˆé‡è¦ï¼Œå¦åˆ™è¿˜æ˜¯ä¼šé‡æ–°æ¸²æŸ“</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/ å¦‚æœåé¢çš„ä¾èµ–é¡¹æ•°ç»„æ²¡æœ‰å€¼çš„è¯ï¼Œå³ä½¿çˆ¶ç»„ä»¶çš„ number å€¼æ”¹å˜äº†ï¼Œå­ç»„ä»¶ä¹Ÿä¸ä¼šå»æ›´æ–°</span></span><br><span class="line"><span class="regexp">  /</span><span class="regexp">/const data = useMemo(()=&gt;(&#123;number&#125;),[]);</span></span><br><span class="line"><span class="regexp">  const data = useMemo(()=&gt;(&#123;number&#125;),[number]);</span></span><br><span class="line"><span class="regexp">  const addClick = useCallback(()=&gt;&#123;</span></span><br><span class="line"><span class="regexp">      setNumber(number+1);</span></span><br><span class="line"><span class="regexp">  &#125;,[number]);</span></span><br><span class="line"><span class="regexp">  return (</span></span><br><span class="line"><span class="regexp">      &lt;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;input type="text" value=&#123;name&#125; onChange=&#123;(e)=&gt;setName(e.target.value)&#125;/</span>&gt;</span><br><span class="line">          &lt;SubCounter data=&#123;data&#125; onClick=&#123;addClick&#125;/&gt;</span><br><span class="line">      &lt;<span class="regexp">/&gt;</span></span><br><span class="line"><span class="regexp">  )</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h3 id="å¸¸è§é—®é¢˜"><a href="#å¸¸è§é—®é¢˜" class="headerlink" title="å¸¸è§é—®é¢˜"></a>å¸¸è§é—®é¢˜</h3><h4 id="useEffect-ä¸èƒ½æ¥æ”¶-async-ä½œä¸ºå›è°ƒå‡½æ•°"><a href="#useEffect-ä¸èƒ½æ¥æ”¶-async-ä½œä¸ºå›è°ƒå‡½æ•°" class="headerlink" title="useEffect ä¸èƒ½æ¥æ”¶ async ä½œä¸ºå›è°ƒå‡½æ•°"></a>useEffect ä¸èƒ½æ¥æ”¶ async ä½œä¸ºå›è°ƒå‡½æ•°</h4><p><code>React</code> è§„å®š <code>useEffect</code> æ¥æ”¶çš„å‡½æ•°ï¼Œè¦ä¹ˆè¿”å›ä¸€ä¸ªèƒ½æ¸…é™¤å‰¯ä½œç”¨çš„å‡½æ•°ï¼Œè¦ä¹ˆå°±ä¸è¿”å›ä»»ä½•å†…å®¹ã€‚è€Œ <code>async</code> è¿”å›çš„æ˜¯ <code>promise</code>ã€‚</p><h4 id="å¦‚ä½•åœ¨-Hooks-ä¸­ä¼˜é›…çš„-Fetch-Data"><a href="#å¦‚ä½•åœ¨-Hooks-ä¸­ä¼˜é›…çš„-Fetch-Data" class="headerlink" title="å¦‚ä½•åœ¨ Hooks ä¸­ä¼˜é›…çš„ Fetch Data"></a>å¦‚ä½•åœ¨ Hooks ä¸­ä¼˜é›…çš„ Fetch Data</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">App</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [data, setData] = useState(&#123; <span class="attr">hits</span>: [] &#125;);</span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ›´ä¼˜é›…çš„æ–¹å¼</span></span><br><span class="line">    <span class="keyword">const</span> fetchData = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="keyword">await</span> axios(</span><br><span class="line">        <span class="string">'https://api.github.com/api/v3/search?query=redux'</span>,</span><br><span class="line">      );</span><br><span class="line">      setData(result.data);</span><br><span class="line">    &#125;;</span><br><span class="line">    fetchData();</span><br><span class="line">  &#125;, []);</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &#123;data.hits.map(<span class="function"><span class="params">item</span> =&gt;</span> (</span><br><span class="line">        &lt;li key=&#123;item.id&#125;&gt;</span><br><span class="line">          &lt;a href=&#123;item.url&#125;&gt;&#123;item.title&#125;&lt;<span class="regexp">/a&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>li&gt;</span><br><span class="line">      ))&#125;</span><br><span class="line">    &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure><h4 id="ä¸è¦è¿‡åº¦ä¾èµ–-useMemo"><a href="#ä¸è¦è¿‡åº¦ä¾èµ–-useMemo" class="headerlink" title="ä¸è¦è¿‡åº¦ä¾èµ– useMemo"></a>ä¸è¦è¿‡åº¦ä¾èµ– useMemo</h4><ul><li><p><code>useMemo</code> æœ¬èº«ä¹Ÿæœ‰å¼€é”€ã€‚<code>useMemo</code> ä¼šã€Œè®°ä½ã€ä¸€äº›å€¼ï¼ŒåŒæ—¶åœ¨åç»­ <code>render</code> æ—¶ï¼Œå°†ä¾èµ–æ•°ç»„ä¸­çš„å€¼å–å‡ºæ¥å’Œä¸Šä¸€æ¬¡è®°å½•çš„å€¼è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœä¸ç›¸ç­‰æ‰ä¼šé‡æ–°æ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œå¦åˆ™ç›´æ¥è¿”å›ã€Œè®°ä½ã€çš„å€¼ã€‚è¿™ä¸ªè¿‡ç¨‹æœ¬èº«å°±ä¼šæ¶ˆè€—ä¸€å®šçš„å†…å­˜å’Œè®¡ç®—èµ„æºã€‚å› æ­¤ï¼Œè¿‡åº¦ä½¿ç”¨ <code>useMemo</code> å¯èƒ½ä¼šå½±å“ç¨‹åºçš„æ€§èƒ½ã€‚</p></li><li><p>åœ¨ä½¿ç”¨ <code>useMemo</code> å‰ï¼Œåº”è¯¥å…ˆæ€è€ƒä¸‰ä¸ªé—®é¢˜:</p><ul><li><strong>ä¼ é€’ç»™ <code>useMemo</code> çš„å‡½æ•°å¼€é”€å¤§ä¸å¤§ï¼Ÿ</strong> æœ‰äº›è®¡ç®—å¼€é”€å¾ˆå¤§ï¼Œæˆ‘ä»¬å°±éœ€è¦ã€Œè®°ä½ã€å®ƒçš„è¿”å›å€¼ï¼Œé¿å…æ¯æ¬¡ <code>render</code> éƒ½å»é‡æ–°è®¡ç®—ã€‚å¦‚æœä½ æ‰§è¡Œçš„æ“ä½œå¼€é”€ä¸å¤§ï¼Œé‚£ä¹ˆå°±ä¸éœ€è¦è®°ä½è¿”å›å€¼ã€‚å¦åˆ™ï¼Œä½¿ç”¨ <code>useMemo</code> æœ¬èº«çš„å¼€é”€å°±å¯èƒ½è¶…è¿‡é‡æ–°è®¡ç®—è¿™ä¸ªå€¼çš„å¼€é”€ã€‚å› æ­¤ï¼Œå¯¹äºä¸€äº›ç®€å•çš„ JS è¿ç®—æ¥è¯´ï¼Œæˆ‘ä»¬ä¸éœ€è¦ä½¿ç”¨ <code>useMemo</code> æ¥ã€Œè®°ä½ã€å®ƒçš„è¿”å›å€¼ã€‚</li><li><strong>è¿”å›çš„å€¼æ˜¯åŸå§‹å€¼å—ï¼Ÿ</strong> å¦‚æœè®¡ç®—å‡ºæ¥çš„æ˜¯åŸºæœ¬ç±»å‹çš„å€¼ï¼ˆstringã€ boolean ã€nullã€undefined ã€numberã€symbolï¼‰ï¼Œé‚£ä¹ˆæ¯æ¬¡æ¯”è¾ƒéƒ½æ˜¯ç›¸ç­‰çš„ï¼Œä¸‹æ¸¸ç»„ä»¶å°±ä¸ä¼šé‡æ–°æ¸²æŸ“ï¼›å¦‚æœè®¡ç®—å‡ºæ¥çš„æ˜¯å¤æ‚ç±»å‹çš„å€¼ï¼ˆobjectã€arrayï¼‰ï¼Œå“ªæ€•å€¼ä¸å˜ï¼Œä½†æ˜¯åœ°å€ä¼šå‘ç”Ÿå˜åŒ–ï¼Œå¯¼è‡´ä¸‹æ¸¸ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚æ‰€ä»¥æˆ‘ä»¬ä¹Ÿéœ€è¦ã€Œè®°ä½ã€è¿™ä¸ªå€¼ã€‚</li><li><strong>åœ¨ç¼–å†™è‡ªå®šä¹‰ <code>Hook</code> æ—¶ï¼Œè¿”å›å€¼ä¸€å®šè¦ä¿æŒå¼•ç”¨çš„ä¸€è‡´æ€§</strong>ã€‚ å› ä¸ºä½ æ— æ³•ç¡®å®šå¤–éƒ¨è¦å¦‚ä½•ä½¿ç”¨å®ƒçš„è¿”å›å€¼ã€‚å¦‚æœè¿”å›å€¼è¢«ç”¨åšå…¶ä»– <code>Hook</code> çš„ä¾èµ–ï¼Œå¹¶ä¸”æ¯æ¬¡ <code>re-render</code> æ—¶å¼•ç”¨ä¸ä¸€è‡´ï¼ˆå½“å€¼ç›¸ç­‰çš„æƒ…å†µï¼‰ï¼Œå°±å¯èƒ½ä¼šäº§ç”Ÿ bugã€‚æ‰€ä»¥å¦‚æœè‡ªå®šä¹‰ Hook ä¸­æš´éœ²å‡ºæ¥çš„å€¼æ˜¯ objectã€arrayã€å‡½æ•°ç­‰ï¼Œéƒ½åº”è¯¥ä½¿ç”¨ <code>useMemo</code> ã€‚ä»¥ç¡®ä¿å½“å€¼ç›¸åŒæ—¶ï¼Œå¼•ç”¨ä¸å‘ç”Ÿå˜åŒ–ã€‚</li></ul></li></ul><h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><h2 id="ä»€ä¹ˆæ˜¯-TypeScript"><a href="#ä»€ä¹ˆæ˜¯-TypeScript" class="headerlink" title="ä»€ä¹ˆæ˜¯ TypeScript"></a>ä»€ä¹ˆæ˜¯ TypeScript</h2><p><code>TypeScript</code> æ˜¯ <code>JavaScript</code> çš„ä¸€ä¸ªè¶…é›†ï¼Œä¸»è¦æä¾›äº†<strong>ç±»å‹ç³»ç»Ÿ</strong>å’Œ<strong>å¯¹ <code>ES6</code> çš„æ”¯æŒ</strong>ã€‚</p><p><img src="/images/ts-1.png" alt="TypeScript"></p><h2 id="ä¸ºä»€ä¹ˆé€‰æ‹©-TypeScript"><a href="#ä¸ºä»€ä¹ˆé€‰æ‹©-TypeScript" class="headerlink" title="ä¸ºä»€ä¹ˆé€‰æ‹© TypeScript"></a>ä¸ºä»€ä¹ˆé€‰æ‹© TypeScript</h2><ul><li><strong>TypeScript å¢åŠ äº†ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</strong><ul><li>ç±»å‹ç³»ç»Ÿå®é™…ä¸Šæ˜¯æœ€å¥½çš„æ–‡æ¡£ï¼Œå¤§éƒ¨åˆ†çš„å‡½æ•°çœ‹çœ‹ç±»å‹çš„å®šä¹‰å°±å¯ä»¥çŸ¥é“å¦‚ä½•ä½¿ç”¨äº†</li><li>å¯ä»¥åœ¨ç¼–è¯‘é˜¶æ®µå°±å‘ç°å¤§éƒ¨åˆ†é”™è¯¯ï¼Œè¿™æ€»æ¯”åœ¨è¿è¡Œæ—¶å€™å‡ºé”™å¥½</li><li>å¢å¼ºäº†ç¼–è¾‘å™¨å’Œ IDE çš„åŠŸèƒ½ï¼ŒåŒ…æ‹¬ä»£ç è¡¥å…¨ã€æ¥å£æç¤ºã€è·³è½¬åˆ°å®šä¹‰ã€é‡æ„ç­‰</li></ul></li><li><strong>TypeScript éå¸¸åŒ…å®¹</strong><ul><li>TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œ.js æ–‡ä»¶å¯ä»¥ç›´æ¥é‡å‘½åä¸º .ts å³å¯</li><li>å³ä½¿ä¸æ˜¾å¼çš„å®šä¹‰ç±»å‹ï¼Œä¹Ÿèƒ½å¤Ÿè‡ªåŠ¨åšå‡ºç±»å‹æ¨è®º</li><li>å¯ä»¥å®šä¹‰ä»ç®€å•åˆ°å¤æ‚çš„å‡ ä¹ä¸€åˆ‡ç±»å‹</li><li>å³ä½¿ TypeScript ç¼–è¯‘æŠ¥é”™ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆ JavaScript æ–‡ä»¶</li><li>å…¼å®¹ç¬¬ä¸‰æ–¹åº“ï¼Œå³ä½¿ç¬¬ä¸‰æ–¹åº“ä¸æ˜¯ç”¨ TypeScript å†™çš„ï¼Œä¹Ÿå¯ä»¥ç¼–å†™å•ç‹¬çš„ç±»å‹æ–‡ä»¶ä¾› TypeScript è¯»å–</li></ul></li><li><strong>TypeScript æ‹¥æœ‰æ´»è·ƒçš„ç¤¾åŒº</strong><ul><li>å¤§éƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“éƒ½æœ‰æä¾›ç»™ TypeScript çš„ç±»å‹å®šä¹‰æ–‡ä»¶</li><li>TypeScript æ‹¥æŠ±äº† ES6 è§„èŒƒï¼Œä¹Ÿæ”¯æŒéƒ¨åˆ† ESNext è‰æ¡ˆçš„è§„èŒƒ</li></ul></li></ul><blockquote><p>äº†è§£äº† React Hooks å’Œ TypeScriptï¼Œæ¥ä¸‹æ¥å°±ä¸€èµ·çœ‹ä¸€ä¸‹äºŒè€…çš„ç»“åˆå®è·µå§ï¼ğŸ˜„</p></blockquote><h1 id="å®è·µ"><a href="#å®è·µ" class="headerlink" title="å®è·µ"></a>å®è·µ</h1><p>æœ¬å®è·µæ¥æºäºæœ¬äººæ­£åœ¨å¼€å‘çš„å¼€æºç»„ä»¶åº“é¡¹ç›® <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0h1aUF6aXIvQXppci1EZXNpZ24=">Azir Design<i class="fa fa-external-link-alt"></i></span>ä¸­çš„ <strong>Grid</strong> æ …æ ¼å¸ƒå±€ç»„ä»¶ã€‚</p><h2 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h2><p><img src="/images/grid-1.png" alt="Grid"></p><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h3 id="Row"><a href="#Row" class="headerlink" title="Row"></a>Row</h3><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>className</td><td>ç±»å</td><td>string</td><td>-</td></tr><tr><td>style</td><td>Rowç»„ä»¶æ ·å¼</td><td>object:CSSProperties</td><td>-</td></tr><tr><td>align</td><td>å‚ç›´å¯¹é½æ–¹å¼</td><td>topï½œmiddleï½œbottom</td><td>top</td></tr><tr><td>justify</td><td>æ°´å¹³æ’åˆ—æ–¹å¼</td><td>startï½œendï½œcenterï½œspace-aroundï½œspace-between</td><td>start</td></tr><tr><td>gutter</td><td>æ …æ ¼é—´éš”ï¼Œå¯ä»¥å†™æˆåƒç´ å€¼è®¾ç½®æ°´å¹³å‚ç›´é—´è·æˆ–è€…ä½¿ç”¨æ•°ç»„å½¢å¼åŒæ—¶è®¾ç½® [æ°´å¹³é—´è·, å‚ç›´é—´è·]</td><td>numberï½œ[number,number]</td><td>0</td></tr></tbody></table><h3 id="Col"><a href="#Col" class="headerlink" title="Col"></a>Col</h3><table><thead><tr><th>å±æ€§</th><th>è¯´æ˜</th><th>ç±»å‹</th><th>é»˜è®¤å€¼</th></tr></thead><tbody><tr><td>className</td><td>ç±»å</td><td>string</td><td>-</td></tr><tr><td>style</td><td>Colç»„ä»¶æ ·å¼</td><td>object:CSSProperties</td><td>-</td></tr><tr><td>flex</td><td>flex å¸ƒå±€å±æ€§</td><td>stringï½œnumber</td><td>-</td></tr><tr><td>offset</td><td>æ …æ ¼å·¦ä¾§çš„é—´éš”æ ¼æ•°ï¼Œé—´éš”å†…ä¸å¯ä»¥æœ‰æ …æ ¼</td><td>number</td><td>0</td></tr><tr><td>order</td><td>æ …æ ¼é¡ºåº</td><td>number</td><td>0</td></tr><tr><td>pull</td><td>æ …æ ¼å‘å·¦ç§»åŠ¨æ ¼æ•°</td><td>number</td><td>0</td></tr><tr><td>push</td><td>æ …æ ¼å‘å³ç§»åŠ¨æ ¼æ•°</td><td>number</td><td>0</td></tr><tr><td>span</td><td>æ …æ ¼å ä½æ ¼æ•°ï¼Œä¸º 0 æ—¶ç›¸å½“äº display: none</td><td>number</td><td>-</td></tr><tr><td>xs</td><td>&lt;576px å“åº”å¼æ …æ ¼ï¼Œå¯ä¸ºæ …æ ¼æ•°æˆ–ä¸€ä¸ªåŒ…å«å…¶ä»–å±æ€§çš„å¯¹è±¡</td><td>numberï½œobject</td><td>-</td></tr><tr><td>sm</td><td>â‰¥576px å“åº”å¼æ …æ ¼ï¼Œå¯ä¸ºæ …æ ¼æ•°æˆ–ä¸€ä¸ªåŒ…å«å…¶ä»–å±æ€§çš„å¯¹è±¡</td><td>numberï½œobject</td><td>-</td></tr><tr><td>md</td><td>â‰¥768px å“åº”å¼æ …æ ¼ï¼Œå¯ä¸ºæ …æ ¼æ•°æˆ–ä¸€ä¸ªåŒ…å«å…¶ä»–å±æ€§çš„å¯¹è±¡</td><td>numberï½œobject</td><td>-</td></tr><tr><td>lg</td><td>â‰¥992px å“åº”å¼æ …æ ¼ï¼Œå¯ä¸ºæ …æ ¼æ•°æˆ–ä¸€ä¸ªåŒ…å«å…¶ä»–å±æ€§çš„å¯¹è±¡</td><td>numberï½œobject</td><td>-</td></tr><tr><td>xl</td><td>â‰¥1200px å“åº”å¼æ …æ ¼ï¼Œå¯ä¸ºæ …æ ¼æ•°æˆ–ä¸€ä¸ªåŒ…å«å…¶ä»–å±æ€§çš„å¯¹è±¡</td><td>numberï½œobject</td><td>-</td></tr><tr><td>xxl</td><td>â‰¥1600px å“åº”å¼æ …æ ¼ï¼Œå¯ä¸ºæ …æ ¼æ•°æˆ–ä¸€ä¸ªåŒ…å«å…¶ä»–å±æ€§çš„å¯¹è±¡</td><td>numberï½œobject</td><td>-</td></tr></tbody></table><h2 id="å¤§å±•èº«æ‰‹"><a href="#å¤§å±•èº«æ‰‹" class="headerlink" title="å¤§å±•èº«æ‰‹"></a>å¤§å±•èº«æ‰‹</h2><blockquote><p>è¿™ä¸€å®è·µä¸»è¦ä»‹ç» React Hooks + TypeScript çš„å®è·µï¼Œä¸å¯¹ CSS è¿‡å¤šèµ˜è¿°ã€‚</p></blockquote><h3 id="Step-1-æ ¹æ®-API-æ¥ç»™-Row-ç»„ä»¶å®šä¹‰-Prop-çš„ç±»å‹"><a href="#Step-1-æ ¹æ®-API-æ¥ç»™-Row-ç»„ä»¶å®šä¹‰-Prop-çš„ç±»å‹" class="headerlink" title="Step-1 æ ¹æ® API æ¥ç»™ Row ç»„ä»¶å®šä¹‰ Prop çš„ç±»å‹"></a>Step-1 æ ¹æ® API æ¥ç»™ Row ç»„ä»¶å®šä¹‰ Prop çš„ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Row.tsx</span></span><br><span class="line"></span><br><span class="line">+ <span class="keyword">import</span> React, &#123; CSSProperties, ReactNode &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line">+ <span class="keyword">import</span> <span class="keyword">import</span> ClassNames <span class="keyword">from</span> <span class="string">'classnames'</span>;</span><br><span class="line">+</span><br><span class="line">+ type gutter = number | [number, number];</span><br><span class="line">+ type align = <span class="string">'top'</span> | <span class="string">'middle'</span> | <span class="string">'bottom'</span>;</span><br><span class="line">+ type justify = <span class="string">'start'</span> | <span class="string">'end'</span> | <span class="string">'center'</span> | <span class="string">'space-around'</span> | <span class="string">'space-between'</span>;</span><br><span class="line">+</span><br><span class="line">+ interface RowProps &#123;</span><br><span class="line">+   className?: string;</span><br><span class="line">+   align?: align;</span><br><span class="line">+   justify?: justify;</span><br><span class="line">+   gutter?: gutter;</span><br><span class="line">+   style?: CSSProperties;</span><br><span class="line">+   children?: ReactNode;</span><br><span class="line">+ &#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬ç”¨åˆ°äº† TypeScript æä¾›çš„åŸºæœ¬æ•°æ®ç±»å‹ã€è”åˆç±»å‹ã€æ¥å£ã€‚</p><p><strong>åŸºæœ¬æ•°æ®ç±»å‹</strong><br>JavaScript çš„ç±»å‹åˆ†ä¸ºä¸¤ç§ï¼š<code>åŸå§‹æ•°æ®ç±»å‹ï¼ˆPrimitive data types</code>ï¼‰å’Œ<code>å¯¹è±¡ç±»å‹ï¼ˆObject typesï¼‰</code>ã€‚</p><p>åŸå§‹æ•°æ®ç±»å‹åŒ…æ‹¬ï¼š<code>å¸ƒå°”å€¼</code>ã€<code>æ•°å€¼</code>ã€<code>å­—ç¬¦ä¸²</code>ã€<code>null</code>ã€<code>undefined</code> ä»¥åŠ ES6 ä¸­çš„æ–°ç±»å‹ <code>Symbol</code>ã€‚æˆ‘ä»¬ä¸»è¦ä»‹ç»å‰äº”ç§åŸå§‹æ•°æ®ç±»å‹åœ¨ TypeScript ä¸­çš„åº”ç”¨ã€‚</p><p><strong>è”åˆç±»å‹</strong><br>è”åˆç±»å‹ï¼ˆUnion Typesï¼‰è¡¨ç¤ºå–å€¼å¯ä»¥ä¸ºå¤šç§ç±»å‹ä¸­çš„ä¸€ç§ã€‚</p><p><strong>ç±»å‹åˆ«å</strong><br>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚</p><p><strong>æ¥å£</strong><br>åœ¨TypeScriptä¸­æ¥å£æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯ç”¨äºå¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹<strong>å¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰</strong>è¿›è¡Œæè¿°ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä½¿ç”¨æ¥å£å¯¹ RowProps è¿›è¡Œäº†æè¿°ã€‚</p><h3 id="Step-2-ç¼–å†™-Row-ç»„ä»¶çš„åŸºç¡€éª¨æ¶"><a href="#Step-2-ç¼–å†™-Row-ç»„ä»¶çš„åŸºç¡€éª¨æ¶" class="headerlink" title="Step-2 ç¼–å†™ Row ç»„ä»¶çš„åŸºç¡€éª¨æ¶"></a>Step-2 ç¼–å†™ Row ç»„ä»¶çš„åŸºç¡€éª¨æ¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Row.tsx</span></span><br><span class="line"></span><br><span class="line">- <span class="keyword">import</span> React, &#123; CSSProperties, ReactNode &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line">+ <span class="keyword">import</span> React, &#123; CSSProperties, ReactNode, FC &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> ClassNames <span class="keyword">from</span> <span class="string">'classnames'</span>;</span><br><span class="line"></span><br><span class="line">type gutter = number | [number, number];</span><br><span class="line">type align = <span class="string">'top'</span> | <span class="string">'middle'</span> | <span class="string">'bottom'</span>;</span><br><span class="line">type justify = <span class="string">'start'</span> | <span class="string">'end'</span> | <span class="string">'center'</span> | <span class="string">'space-around'</span> | <span class="string">'space-between'</span>;</span><br><span class="line"></span><br><span class="line">interface RowProps &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line">+ <span class="keyword">const</span> Row: FC&lt;RowProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">+   <span class="keyword">const</span> &#123; className, align, justify, children, style = &#123;&#125; &#125; = props;</span><br><span class="line">+   <span class="keyword">const</span> classes = ClassNames(<span class="string">'azir-row'</span>, className, &#123;</span><br><span class="line">+     [<span class="string">`azir-row-<span class="subst">$&#123;align&#125;</span>`</span>]: align,</span><br><span class="line">+     [<span class="string">`azir-row-<span class="subst">$&#123;justify&#125;</span>`</span>]: justify</span><br><span class="line">+   &#125;);</span><br><span class="line">+</span><br><span class="line">+   <span class="keyword">return</span> (</span><br><span class="line">+     <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classes&#125;</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">+       &#123;children&#125;</span></span><br><span class="line"><span class="xml">+     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">+   );</span><br><span class="line">+ &#125;;</span><br><span class="line"></span><br><span class="line">+ Row.defaultProps = &#123;</span><br><span class="line">+   align: <span class="string">'top'</span>,</span><br><span class="line">+   justify: <span class="string">'start'</span>,</span><br><span class="line">+   gutter: <span class="number">0</span></span><br><span class="line">+ &#125;;</span><br><span class="line"></span><br><span class="line">+ <span class="keyword">export</span> <span class="keyword">default</span> Row;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨åˆ°äº†<strong>æ³›å‹</strong>ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯æ³›å‹å‘¢ï¼Ÿ</p><p><strong>æ³›å‹</strong><br>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯æŒ‡åœ¨å®šä¹‰å‡½æ•°ã€æ¥å£æˆ–ç±»çš„æ—¶å€™ï¼Œä¸é¢„å…ˆæŒ‡å®šå…·ä½“çš„ç±»å‹ï¼Œè€Œåœ¨ä½¿ç”¨çš„æ—¶å€™å†æŒ‡å®šç±»å‹çš„ä¸€ç§ç‰¹æ€§ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span>&gt;(<span class="params">arg: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="Step-3-æ ¹æ®-API-æ¥ç»™-Col-ç»„ä»¶å®šä¹‰-Prop-çš„ç±»å‹"><a href="#Step-3-æ ¹æ®-API-æ¥ç»™-Col-ç»„ä»¶å®šä¹‰-Prop-çš„ç±»å‹" class="headerlink" title="Step-3 æ ¹æ® API æ¥ç»™ Col ç»„ä»¶å®šä¹‰ Prop çš„ç±»å‹"></a>Step-3 æ ¹æ® API æ¥ç»™ Col ç»„ä»¶å®šä¹‰ Prop çš„ç±»å‹</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Col.tsx</span></span><br><span class="line"></span><br><span class="line">+ <span class="keyword">import</span> React, &#123;ReactNode, CSSProperties &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line">+ <span class="keyword">import</span> ClassNames <span class="keyword">from</span> <span class="string">'classnames'</span>;</span><br><span class="line">+</span><br><span class="line">+ interface ColCSSProps &#123;</span><br><span class="line">+   offset?: number;</span><br><span class="line">+   order?: number;</span><br><span class="line">+   pull?: number;</span><br><span class="line">+   push?: number;</span><br><span class="line">+   span?: number;</span><br><span class="line">+ &#125;</span><br><span class="line">+</span><br><span class="line">+ <span class="keyword">export</span> interface ColProps &#123;</span><br><span class="line">+   className?: string;</span><br><span class="line">+   style?: CSSProperties;</span><br><span class="line">+   children?: ReactNode;</span><br><span class="line">+   flex?: string | number;</span><br><span class="line">+   offset?: number;</span><br><span class="line">+   order?: number;</span><br><span class="line">+   pull?: number;</span><br><span class="line">+   push?: number;</span><br><span class="line">+   span?: number;</span><br><span class="line">+   xs?: ColCSSProps;</span><br><span class="line">+   sm?: ColCSSProps;</span><br><span class="line">+   md?: ColCSSProps;</span><br><span class="line">+   lg?: ColCSSProps;</span><br><span class="line">+   xl?: ColCSSProps;</span><br><span class="line">+   xxl?: ColCSSProps;</span><br><span class="line">+ &#125;</span><br></pre></td></tr></table></figure><h3 id="Step-4-ç¼–å†™-Col-ç»„ä»¶çš„åŸºç¡€éª¨æ¶"><a href="#Step-4-ç¼–å†™-Col-ç»„ä»¶çš„åŸºç¡€éª¨æ¶" class="headerlink" title="Step-4 ç¼–å†™ Col ç»„ä»¶çš„åŸºç¡€éª¨æ¶"></a>Step-4 ç¼–å†™ Col ç»„ä»¶çš„åŸºç¡€éª¨æ¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// Col.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123;ReactNode, CSSProperties &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ClassNames <span class="keyword">from</span> <span class="string">'classnames'</span>;</span><br><span class="line">interface ColCSSProps &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> interface ColProps &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">+ type mediaScreen = <span class="string">'xs'</span> | <span class="string">'sm'</span> | <span class="string">'md'</span> | <span class="string">'lg'</span> | <span class="string">'xl'</span> | <span class="string">'xxl'</span>;</span><br><span class="line"></span><br><span class="line">+ <span class="function"><span class="keyword">function</span> <span class="title">sc</span>(<span class="params">size: mediaScreen, value: ColCSSProps</span>): <span class="title">Array</span>&lt;<span class="title">string</span>&gt; </span>&#123;</span><br><span class="line">+   <span class="keyword">const</span> t: <span class="built_in">Array</span>&lt;string&gt; = [];</span><br><span class="line">+   <span class="built_in">Object</span>.keys(value).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">+     t.push(<span class="string">`azir-col-<span class="subst">$&#123;size&#125;</span>-<span class="subst">$&#123;key&#125;</span>-<span class="subst">$&#123;value[key]&#125;</span>`</span>);</span><br><span class="line">+   &#125;);</span><br><span class="line">+   <span class="keyword">return</span> t;</span><br><span class="line">+ &#125;</span><br><span class="line"></span><br><span class="line">+ <span class="keyword">const</span> Col: FC&lt;ColProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">+   <span class="keyword">const</span> &#123;</span><br><span class="line">+    className,</span><br><span class="line">+    style = &#123;&#125;,</span><br><span class="line">+    span,</span><br><span class="line">+    offset,</span><br><span class="line">+    children,</span><br><span class="line">+    pull,</span><br><span class="line">+    push,</span><br><span class="line">+    order,</span><br><span class="line">+    xs,</span><br><span class="line">+    sm,</span><br><span class="line">+    md,</span><br><span class="line">+    lg,</span><br><span class="line">+    xl,</span><br><span class="line">+    xxl</span><br><span class="line">+   &#125; = props;</span><br><span class="line">+</span><br><span class="line">+   <span class="keyword">const</span> [classes, setClasses] = useState&lt;string&gt;(</span><br><span class="line">+    ClassNames(<span class="string">'azir-col'</span>, className, &#123;</span><br><span class="line">+      [<span class="string">`azir-col-span-<span class="subst">$&#123;span&#125;</span>`</span>]: span,</span><br><span class="line">+      [<span class="string">`azir-col-offset-<span class="subst">$&#123;offset&#125;</span>`</span>]: offset,</span><br><span class="line">+      [<span class="string">`azir-col-pull-<span class="subst">$&#123;pull&#125;</span>`</span>]: pull,</span><br><span class="line">+      [<span class="string">`azir-col-push-<span class="subst">$&#123;push&#125;</span>`</span>]: push,</span><br><span class="line">+      [<span class="string">`azir-col-order-<span class="subst">$&#123;order&#125;</span>`</span>]: order</span><br><span class="line">+    &#125;)</span><br><span class="line">+   );</span><br><span class="line">+</span><br><span class="line">+   <span class="comment">// å“åº”å¼ xs,sm,md,lg,xl,xxl</span></span><br><span class="line">+   useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">+     xs &amp;&amp; setClasses(<span class="function"><span class="params">classes</span> =&gt;</span> ClassNames(classes, sc(<span class="string">'xs'</span>, xs)));</span><br><span class="line">+     sm &amp;&amp; setClasses(<span class="function"><span class="params">classes</span> =&gt;</span> ClassNames(classes, sc(<span class="string">'sm'</span>, sm)));</span><br><span class="line">+     md &amp;&amp; setClasses(<span class="function"><span class="params">classes</span> =&gt;</span> ClassNames(classes, sc(<span class="string">'md'</span>, md)));</span><br><span class="line">+     lg &amp;&amp; setClasses(<span class="function"><span class="params">classes</span> =&gt;</span> ClassNames(classes, sc(<span class="string">'lg'</span>, lg)));</span><br><span class="line">+     xl &amp;&amp; setClasses(<span class="function"><span class="params">classes</span> =&gt;</span> ClassNames(classes, sc(<span class="string">'xl'</span>, xl)));</span><br><span class="line">+     xxl &amp;&amp; setClasses(<span class="function"><span class="params">classes</span> =&gt;</span> ClassNames(classes, sc(<span class="string">'xxl'</span>, xxl)));</span><br><span class="line">+   &#125;, [xs, sm, md, lg, xl, xxl]);</span><br><span class="line">+</span><br><span class="line">+   <span class="keyword">return</span> (</span><br><span class="line">+     <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classes&#125;</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">+       &#123;children&#125;</span></span><br><span class="line"><span class="xml">+     <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">+   );</span><br><span class="line">+ &#125;;</span><br><span class="line">+ Col.defaultProps = &#123;</span><br><span class="line">+   offset: <span class="number">0</span>,</span><br><span class="line">+   pull: <span class="number">0</span>,</span><br><span class="line">+   push: <span class="number">0</span>,</span><br><span class="line">+   span: <span class="number">24</span></span><br><span class="line">+ &#125;;</span><br><span class="line">+ Col.displayName = <span class="string">'Col'</span>;</span><br><span class="line">+</span><br><span class="line">+ <span class="keyword">export</span> <span class="keyword">default</span> Col;</span><br></pre></td></tr></table></figure><p>åœ¨è¿™é‡Œ <code>TypeScript</code> ç¼–è¯‘å™¨æŠ›å‡ºäº†è­¦å‘Šã€‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Element implicitly has an <span class="string">'any'</span> <span class="built_in">type</span> because expression of <span class="built_in">type</span> <span class="string">'string'</span> can<span class="string">'t be used to index type '</span>ColCSSProps<span class="string">'.</span></span><br><span class="line"><span class="string">  No index signature with a parameter of type '</span>string<span class="string">' was found on type '</span>ColCSSProps<span class="string">'.  TS7053</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    71 |       const t: Array&lt;string&gt; = [];</span></span><br><span class="line"><span class="string">    72 |       Object.keys(value).forEach(key =&gt; &#123;</span></span><br><span class="line"><span class="string">  &gt; 73 |         t.push(`azir-col-$&#123;size&#125;-$&#123;key&#125;-$&#123;value[key]&#125;`);</span></span><br><span class="line"><span class="string">       |                                           ^</span></span><br><span class="line"><span class="string">    74 |       &#125;);</span></span><br><span class="line"><span class="string">    75 |       return t;</span></span><br><span class="line"><span class="string">    76 |     &#125;</span></span><br></pre></td></tr></table></figure><p>ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šå…ƒç´ éšå¼åœ°å…·æœ‰ <code>any</code> ç±»å‹ï¼Œç±»å‹ <code>string</code> ä¸èƒ½ç”¨äº<code>ColCSSProps</code>çš„ç´¢å¼•ç±»å‹ã€‚é‚£ä¹ˆè¿™ä¸ªé—®é¢˜è¯¥å¦‚ä½•ç»“å±€å‘¢ï¼Ÿ</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">interface ColCSSProps &#123;</span><br><span class="line">  offset?: number;</span><br><span class="line">  order?: number;</span><br><span class="line">  pull?: number;</span><br><span class="line">  push?: number;</span><br><span class="line">  span?: number;</span><br><span class="line">+  [key: string]: number | <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åªéœ€è¦å‘Šè¯‰ <code>TypeScript</code> <code>ColCSSProps</code> çš„é”®ç±»å‹æ˜¯ <code>string</code> å€¼ç±»å‹ä¸º <code>number | undefined</code> å°±å¯ä»¥äº†ã€‚</p><h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><p>å†™åˆ°ç°åœ¨ï¼Œè¯¥æµ‹è¯•ä¸€ä¸‹ä»£ç äº†ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// example.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Row <span class="keyword">from</span> <span class="string">'./row'</span>;</span><br><span class="line"><span class="keyword">import</span> Col <span class="keyword">from</span> <span class="string">'./col'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div data-test=<span class="string">"row-test"</span> style=&#123;&#123; <span class="attr">padding</span>: <span class="string">'20px'</span> &#125;&#125;&gt;</span><br><span class="line">      &lt;Row className=<span class="string">"jd-share"</span>&gt;</span><br><span class="line">        &lt;Col style=&#123;&#123; <span class="attr">background</span>: <span class="string">'red'</span> &#125;&#125; span=&#123;<span class="number">2</span>&#125;&gt;</span><br><span class="line">          <span class="number">123</span></span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col style=&#123;&#123; background: 'yellow' &#125;&#125; offset=&#123;2&#125; span=&#123;4&#125;&gt;</span></span><br><span class="line"><span class="regexp">          123</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Col&gt;</span><br><span class="line">        &lt;Col style=&#123;&#123; <span class="attr">background</span>: <span class="string">'blue'</span> &#125;&#125; span=&#123;<span class="number">6</span>&#125;&gt;</span><br><span class="line">          <span class="number">123</span></span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Row&gt;</span><br><span class="line">      &lt;Row&gt;</span><br><span class="line">        &lt;Col order=&#123;<span class="number">1</span>&#125; span=&#123;<span class="number">8</span>&#125; xs=&#123;&#123; <span class="attr">span</span>: <span class="number">20</span> &#125;&#125; lg=&#123;&#123; <span class="attr">span</span>: <span class="number">11</span>, <span class="attr">offset</span>: <span class="number">1</span> &#125;&#125;&gt;</span><br><span class="line">          &lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="string">'100px'</span>, <span class="attr">backgroundColor</span>: <span class="string">'#3170bb'</span> &#125;&#125;&gt;</span><br><span class="line">            Col1</span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Col&gt;</span><br><span class="line">        &lt;Col span=&#123;<span class="number">4</span>&#125; xs=&#123;&#123; <span class="attr">span</span>: <span class="number">4</span> &#125;&#125; lg=&#123;&#123; <span class="attr">span</span>: <span class="number">12</span> &#125;&#125;&gt;</span><br><span class="line">          &lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="string">'80px'</span>, <span class="attr">backgroundColor</span>: <span class="string">'#2170bb'</span> &#125;&#125;&gt;Col2&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Col&gt;</span><br><span class="line">      &lt;<span class="regexp">/Row&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>xs å°ºå¯¸å±å¹•ä¸‹<br><img src="/images/share-ex-1.png" alt="lg å°ºå¯¸å±å¹•ä¸‹"><br>lg å°ºå¯¸å±å¹•ä¸‹<br><img src="/images/share-ex-2.png" alt="xs å°ºå¯¸å±å¹•ä¸‹"></p><p>è‡³æ­¤å‘¢ï¼Œæ•ˆæœè¿˜ç®—ä¸é”™ã€‚</p><h3 id="Step-5-é™åˆ¶-Row-ç»„ä»¶çš„-Children"><a href="#Step-5-é™åˆ¶-Row-ç»„ä»¶çš„-Children" class="headerlink" title="Step-5 é™åˆ¶ Row ç»„ä»¶çš„ Children"></a>Step-5 é™åˆ¶ Row ç»„ä»¶çš„ Children</h3><p>è™½ç„¶æ•ˆæœè¿˜ä¸é”™ï¼Œä½†æ˜¯ <code>Row</code> ç»„ä»¶çš„ <code>Children</code> å¯ä»¥ä¼ é€’ä»»ä½•å…ƒç´ </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// row.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Row: FC&lt;RowProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;classes&#125; style=&#123;style&#125;&gt;</span><br><span class="line">      &#123;children&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¹Ÿå¤ªéšæ„äº†å§ï¼å¦‚æœ <code>Children</code> ä¸­åŒ…å«äº†ä¸æ˜¯ <code>Col</code> ç»„ä»¶çš„èŠ‚ç‚¹çš„è¯å¸ƒå±€è‚¯å®šä¼šå‡ºé—®é¢˜ï¼Œæˆ‘å†³å®šåœ¨è¿™é‡Œé™åˆ¶ä¸€ä¸‹ <code>Row</code> ç»„ä»¶çš„ <code>Children</code> ç±»å‹ã€‚</p><p>é‚£ä¹ˆè¯¥å¦‚ä½•å»é™åˆ¶å‘¢ï¼Ÿæœ‰çš„äººä¼šè®¤ä¸ºï¼Œç›´æ¥ <code>children.map</code> ï¼Œæ ¹æ®ç»“æ„æ¥åˆ¤æ–­ä¸å°±å¯ä»¥äº†å—ï¼Ÿè¿™æ ·åšæ˜¯ä¸å¯å–çš„ï¼Œ<code>React</code> å®˜æ–¹ä¹ŸæŒ‡å‡ºåœ¨ <code>children</code> ä¸Šç›´æ¥è°ƒç”¨ <code>map</code> æ˜¯éå¸¸å±é™©çš„ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½å¤Ÿç¡®å®š <code>children</code> çš„ç±»å‹ã€‚é‚£è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<code>React</code> å®˜æ–¹å¾ˆè´´å¿ƒçš„ä¹Ÿç»™æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª API <code>React.Children</code></p><p>åœ¨è¿™ä¹‹å‰æˆ‘ä»¬å…ˆç»™ <code>Col</code> ç»„ä»¶è®¾ç½®ä¸€ä¸ªå†…ç½®å±æ€§ <code>displayName</code> å±æ€§æ¥å¸®åŠ©æˆ‘ä»¬åˆ¤æ–­ç±»å‹ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// col.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Col: FC&lt;ColProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">+ Col.displayName = <span class="string">'Col'</span>;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬è¯·å‡ºå› ä¸ºå¤§å“¥ <code>React.Children</code> APIã€‚è¿™ä¸ª <code>API</code> å¯ä»¥ä¸“é—¨ç”¨æ¥å¤„ç† <code>Children</code>ã€‚æˆ‘ä»¬ç»™ Row ç»„ä»¶ç¼–å†™ä¸€ä¸ª <code>renderChildren</code> å‡½æ•°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// row.tsx</span></span><br><span class="line"><span class="keyword">const</span> Row: FC&lt;RowProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; className, align, justify, children, style = &#123;&#125; &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> classes = ClassNames(<span class="string">'azir-row'</span>, className, &#123;</span><br><span class="line">    [<span class="string">`azir-row-<span class="subst">$&#123;align&#125;</span>`</span>]: align,</span><br><span class="line">    [<span class="string">`azir-row-<span class="subst">$&#123;justify&#125;</span>`</span>]: justify</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">+  <span class="keyword">const</span> renderChildren = useCallback(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">+     <span class="keyword">return</span> React.Children.map(children, (child, index) =&gt; &#123;</span><br><span class="line">+       <span class="keyword">try</span> &#123;</span><br><span class="line">+         <span class="comment">// child æ˜¯ ReactNode ç±»å‹ï¼Œåœ¨è¯¥ç±»å‹ä¸‹æœ‰å¾ˆå¤šå­ç±»å‹ï¼Œæˆ‘ä»¬éœ€è¦æ–­è¨€ä¸€ä¸‹</span></span><br><span class="line">+         <span class="keyword">const</span> childElement = child <span class="keyword">as</span> React.FunctionComponentElement&lt;ColProps&gt;;</span><br><span class="line">+         <span class="keyword">const</span> &#123; displayName &#125; = childElement.type;</span><br><span class="line">+         <span class="keyword">if</span> (displayName === <span class="string">'Col'</span>) &#123;</span><br><span class="line">+           <span class="keyword">return</span> child;</span><br><span class="line">+         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">+           <span class="built_in">console</span>.error(</span><br><span class="line">+             <span class="string">'Warning: Row has a child which is not a Col component'</span></span><br><span class="line">+           );</span><br><span class="line">+         &#125;</span><br><span class="line">+       &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">+         <span class="built_in">console</span>.error(<span class="string">'Warning: Row has a child which is not a Col component'</span>);</span><br><span class="line">+       &#125;</span><br><span class="line">+     &#125;);</span><br><span class="line">+   &#125;, [children]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;classes&#125; style=&#123;style&#125;&gt;</span><br><span class="line">-     &#123;children&#125;</span><br><span class="line">+     &#123;renderChildren()&#125;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br></pre></td></tr></table></figure><p>è‡³æ­¤æˆ‘ä»¬å·²ç»å®Œæˆäº†80%çš„å·¥ä½œï¼Œæˆ‘ä»¬æ˜¯ä¸æ˜¯å¿˜äº†ç‚¹ä»€ä¹ˆï¼Ÿï¼Ÿï¼Ÿ</p><h3 id="Step-6-é”¦ä¸Šæ·»èŠ±-gutter"><a href="#Step-6-é”¦ä¸Šæ·»èŠ±-gutter" class="headerlink" title="Step-6 é”¦ä¸Šæ·»èŠ±-gutter"></a>Step-6 é”¦ä¸Šæ·»èŠ±-gutter</h3><p>æˆ‘ä»¬é€šè¿‡ <code>å¤–å±‚ margin</code> + <code>å†…å±‚ padding</code> çš„æ¨¡å¼æ¥é…åˆå®ç°æ°´å¹³å‚ç›´é—´è·çš„è®¾ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// row.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123;</span><br><span class="line">  CSSProperties, ReactNode, FC, FunctionComponentElement, useCallback, useEffect, useState</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Row: FC&lt;RowProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">-  <span class="keyword">const</span> &#123; className, align, justify, children, style = &#123;&#125; &#125; = props;</span><br><span class="line">+  <span class="keyword">const</span> &#123; className, align, justify, children, gutter, style = &#123;&#125; &#125; = props;</span><br><span class="line"></span><br><span class="line">+ <span class="keyword">const</span> [rowStyle, setRowStyle] = useState&lt;CSSProperties&gt;(style);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">-   <span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;classes&#125;</span> <span class="attr">style</span>=<span class="string">&#123;style&#125;</span>&gt;</span></span></span><br><span class="line">+   &lt;div className=&#123;classes&#125; style=&#123;rowStyle&#125;&gt;</span><br><span class="line"></span><br><span class="line">      &#123;renderChildren()&#125;</span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">  );</span></span><br><span class="line"><span class="xml">&#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="xml">// ...</span></span><br><span class="line"></span><br><span class="line"><span class="xml">export default Row;</span></span><br></pre></td></tr></table></figure><p><code>Row</code> ç»„ä»¶çš„ <code>margin</code> å·²ç»è¿™è®¾ç½®å¥½äº†ï¼Œé‚£ä¹ˆ <code>Col</code> ç»„ä»¶çš„ <code>padding</code> è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿæœ‰ä¸¤ä¸­åŠæ³•ï¼Œä¸€æ˜¯ä¼ é€’ <code>props</code>ã€äºŒæ˜¯ä½¿ç”¨ <code>context</code>ï¼Œæˆ‘å†³å®šä½¿ç”¨ context æ¥åšç»„ä»¶é€šä¿¡ï¼Œå› ä¸ºæˆ‘å¹¶ä¸æƒ³è®© Col ç»„ä»¶çš„ props å¤ªå¤šå¤ªä¹±ï¼ˆå·²ç»å¤Ÿä¹±äº†â€¦ï¼‰ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// row.tsx</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> React, &#123;</span><br><span class="line">  CSSProperties, ReactNode, FC, FunctionComponentElement, useCallback, useEffect, useState</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> interface RowContext &#123;</span><br><span class="line">  gutter?: gutter;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> RowContext = createContext&lt;RowContext&gt;(&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> Row: FC&lt;RowProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">-  <span class="keyword">const</span> &#123; className, align, justify, children, style = &#123;&#125; &#125; = props;</span><br><span class="line">+  <span class="keyword">const</span> &#123; className, align, justify, children, gutter, style = &#123;&#125; &#125; = props;</span><br><span class="line"></span><br><span class="line">+ <span class="keyword">const</span> [rowStyle, setRowStyle] = useState&lt;CSSProperties&gt;(style);</span><br><span class="line"></span><br><span class="line">+ <span class="keyword">const</span> passedContext: RowContext = &#123;</span><br><span class="line">+   gutter</span><br><span class="line">+ &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div className=&#123;classes&#125; style=&#123;rowStyle&#125;&gt;</span><br><span class="line">+     <span class="xml"><span class="tag">&lt;<span class="name">RowContext.Provider</span> <span class="attr">value</span>=<span class="string">&#123;passedContext&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        &#123;renderChildren()&#125;</span></span><br><span class="line"><span class="xml">+     <span class="tag">&lt;/<span class="name">RowContext.Provider</span>&gt;</span></span></span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">/</span><span class="regexp">/ ...</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">export default Row;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬åœ¨ <code>Row</code> ç»„ä»¶ä¸­åˆ›å»ºäº†ä¸€ä¸ª <code>context</code>ï¼Œæ¥ä¸‹æ¥å°±è¦åœ¨ <code>Col</code> ç»„ä»¶ä¸­ä½¿ç”¨ï¼Œå¹¶è®¡ç®—å‡º <code>Col</code> ç»„ä»¶ <code>gutter</code> å¯¹åº”çš„ <code>padding</code> å€¼ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// col.tsx</span></span><br><span class="line"><span class="keyword">import</span> React, &#123;</span><br><span class="line">  ReactNode,</span><br><span class="line">  CSSProperties,</span><br><span class="line">  FC,</span><br><span class="line">  useState,</span><br><span class="line">  useEffect,</span><br><span class="line">+  useContext</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> ClassNames <span class="keyword">from</span> <span class="string">'classnames'</span>;</span><br><span class="line">+ <span class="keyword">import</span> &#123; RowContext &#125; <span class="keyword">from</span> <span class="string">'./row'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"><span class="keyword">const</span> Col: FC&lt;ColProps&gt; = <span class="function"><span class="params">props</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">+ <span class="keyword">const</span> [colStyle, setColStyle] = useState&lt;CSSProperties&gt;(style);</span><br><span class="line">+ <span class="keyword">const</span> &#123; gutter &#125; = useContext(RowContext);</span><br><span class="line">+ <span class="comment">// æ°´å¹³å‚ç›´é—´è·</span></span><br><span class="line">+ useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">+   <span class="keyword">if</span> (<span class="built_in">Object</span>.prototype.toString.call(gutter) === <span class="string">'[object Number]'</span>) &#123;</span><br><span class="line">+     <span class="keyword">const</span> padding = gutter <span class="keyword">as</span> number;</span><br><span class="line">+     <span class="keyword">if</span> (padding &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">+       setColStyle(<span class="function"><span class="params">style</span> =&gt;</span> (&#123;</span><br><span class="line">+         padding: <span class="string">`<span class="subst">$&#123;padding <span class="regexp">/ 2&#125;px`,</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+         ...style</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+       &#125;));</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+     &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+   &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+   if (Object.prototype.toString.call(gutter) === '[object Array]') &#123;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+     const [paddingX, paddingY] = gutter as [number, number];</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+     if (paddingX &gt;= 0 &amp;&amp; paddingY &gt;= 0) &#123;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+       setColStyle(style =&gt; (&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+         padding: `$&#123;paddingY /</span> <span class="number">2</span>&#125;</span>px <span class="subst">$&#123;paddingX <span class="regexp">/ 2&#125;px`,</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+         ...style</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+       &#125;));</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+     &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+   &#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+ &#125;, [gutter]);</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">  /</span><span class="regexp">/ ...</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp"></span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">  return (</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">-   &lt;div className=&#123;classes&#125; style=&#123;style&#125;&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">+   &lt;div className=&#123;classes&#125; style=&#123;colStyle&#125;&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">      &#123;children&#125;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="regexp">    &lt;/</span>div&gt;</span></span></span><br><span class="line"><span class="string"><span class="subst">  );</span></span></span><br><span class="line"><span class="string"><span class="subst">&#125;</span>;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// ...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">export default Col;</span></span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œå‘¢ï¼Œæˆ‘ä»¬çš„æ …æ ¼ç»„ä»¶å°±å¤§åŠŸå‘Šæˆå•¦ï¼æˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹å§ï¼ğŸ˜„</p><h3 id="æµ‹è¯•-1"><a href="#æµ‹è¯•-1" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Row <span class="keyword">from</span> <span class="string">'./row'</span>;</span><br><span class="line"><span class="keyword">import</span> Col <span class="keyword">from</span> <span class="string">'./col'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div data-test=<span class="string">"row-test"</span> style=&#123;&#123; <span class="attr">padding</span>: <span class="string">'20px'</span> &#125;&#125;&gt;</span><br><span class="line">      &lt;Row&gt;</span><br><span class="line">        &lt;Col span=&#123;<span class="number">24</span>&#125;&gt;</span><br><span class="line">          &lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="string">'100px'</span>, <span class="attr">backgroundColor</span>: <span class="string">'#3170bb'</span> &#125;&#125;&gt;</span><br><span class="line">            Col1</span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Col&gt;</span><br><span class="line">      &lt;<span class="regexp">/Row&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Row gutter=&#123;10&#125;&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col order=&#123;1&#125; span=&#123;8&#125; xs=&#123;&#123; span: 20 &#125;&#125; lg=&#123;&#123; span: 11, offset: 1 &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '100px', backgroundColor: '#3170bb' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">            Col1</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col span=&#123;4&#125; xs=&#123;&#123; span: 4 &#125;&#125; lg=&#123;&#123; span: 12 &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '80px', backgroundColor: '#2170bb' &#125;&#125;&gt;Col2&lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Row&gt;</span><br><span class="line">      &lt;Row gutter=&#123;<span class="number">10</span>&#125; align=<span class="string">"middle"</span>&gt;</span><br><span class="line">        &lt;Col span=&#123;<span class="number">8</span>&#125;&gt;</span><br><span class="line">          &lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="string">'80px'</span>, <span class="attr">backgroundColor</span>: <span class="string">'#2170bb'</span> &#125;&#125;&gt;Col1&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Col&gt;</span><br><span class="line">        &lt;Col offset=&#123;<span class="number">8</span>&#125; span=&#123;<span class="number">8</span>&#125;&gt;</span><br><span class="line">          &lt;div style=&#123;&#123; <span class="attr">height</span>: <span class="string">'100px'</span>, <span class="attr">backgroundColor</span>: <span class="string">'#3170bb'</span> &#125;&#125;&gt;</span><br><span class="line">            Col2</span><br><span class="line">          &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>Col&gt;</span><br><span class="line">      &lt;<span class="regexp">/Row&gt;</span></span><br><span class="line"><span class="regexp">      &lt;Row gutter=&#123;10&#125; align="bottom"&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col span=&#123;4&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '80px', backgroundColor: '#2170bb' &#125;&#125;&gt;Col1&lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col span=&#123;8&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '100px', backgroundColor: '#3170bb' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">            Col2</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col push=&#123;3&#125; span=&#123;9&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '130px', backgroundColor: '#2170bb' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">            Col3</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col span=&#123;4&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '80px', backgroundColor: '#2170bb' &#125;&#125;&gt;Col1&lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col span=&#123;8&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '100px', backgroundColor: '#3170bb' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">            Col2</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col span=&#123;8&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '130px', backgroundColor: '#2170bb' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">            Col3</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">        &lt;Col pull=&#123;1&#125; span=&#123;3&#125;&gt;</span></span><br><span class="line"><span class="regexp">          &lt;div style=&#123;&#123; height: '100px', backgroundColor: '#3170bb' &#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">            Col2</span></span><br><span class="line"><span class="regexp">          &lt;/</span>div&gt;</span><br><span class="line">        &lt;<span class="regexp">/Col&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>Row&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;;</span></span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è‡³æ­¤ <code>React Hooks + TypeScript</code> çš„å®è·µåˆ†äº«ç»“æŸäº†ï¼Œæˆ‘è¿™åªåˆ—ä¸¾äº†æ¯”è¾ƒå¸¸ç”¨ <code>Hooks API</code> å’Œ <code>TypeScript</code> çš„ç‰¹æ€§ï¼Œéº»é›€è™½å°ã€äº”è„ä¿±å…¨ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥ä½“ä¼šåˆ° <code>React Hooks + TypeScript</code> å¸¦æ¥çš„å¥½å¤„ï¼ŒäºŒè€…çš„é…åˆä¸€å®šä¼šè®©æˆ‘ä»¬çš„ä»£ç å˜å¾—æ—¢è½»å·§æœ‰å¥å£®ã€‚å…³äº <code>Hooks</code> å’Œ <code>TypeScript</code> çš„å†…å®¹å¸Œæœ›è¯»è€…å»å®˜æ–¹ç½‘ç«™è¿›è¡Œæ›´æ·±å…¥çš„å­¦ä¹ ã€‚</p></div><div class="reward-container"><div></div><button onclick='var qr=document.getElementById("qr");qr.style.display="none"===qr.style.display?"block":"none"'>æ‰“èµ</button><div id="qr" style="display:none"><div style="display:inline-block"><img src="/images/base/wechatpay.jpg" alt="HuiAzir å¾®ä¿¡æ”¯ä»˜"><p>å¾®ä¿¡æ”¯ä»˜</p></div><div style="display:inline-block"><img src="/images/base/alipay.jpg" alt="HuiAzir æ”¯ä»˜å®"><p>æ”¯ä»˜å®</p></div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E7%BB%8F%E9%AA%8C/" rel="tag"><i class="fa fa-tag"></i> ç»éªŒ</a> <a href="/tags/React/" rel="tag"><i class="fa fa-tag"></i> React</a> <a href="/tags/TypeScript/" rel="tag"><i class="fa fa-tag"></i> TypeScript</a></div><div class="post-nav"><div class="post-nav-item"><a href="/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/%E6%95%B0%E6%8D%AE%E9%A9%B1%E5%8A%A8/" rel="prev" title="Vueæºç è§£æ-æ•°æ®é©±åŠ¨(Step 2)"><i class="fa fa-chevron-left"></i> Vueæºç è§£æ-æ•°æ®é©±åŠ¨(Step 2)</a></div><div class="post-nav-item"></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview">ç«™ç‚¹æ¦‚è§ˆ</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#React-Hooks"><span class="nav-number">1.</span> <span class="nav-text">React Hooks</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯-Hooks"><span class="nav-number">1.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ Hooks</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hooks-è§£å†³äº†å“ªäº›é—®é¢˜"><span class="nav-number">1.2.</span> <span class="nav-text">Hooks è§£å†³äº†å“ªäº›é—®é¢˜?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hooks-ä¼˜åŠ¿"><span class="nav-number">1.3.</span> <span class="nav-text">Hooks ä¼˜åŠ¿</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¸¸ç”¨-Hooks"><span class="nav-number">1.4.</span> <span class="nav-text">å¸¸ç”¨ Hooks</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#useState"><span class="nav-number">1.4.1.</span> <span class="nav-text">useState</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä½¿ç”¨æ–¹æ³•"><span class="nav-number">1.4.1.1.</span> <span class="nav-text">ä½¿ç”¨æ–¹æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é—­åŒ…"><span class="nav-number">1.4.1.2.</span> <span class="nav-text">æ¯æ¬¡æ¸²æŸ“éƒ½æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„é—­åŒ…</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å‡½æ•°å¼æ›´æ–°"><span class="nav-number">1.4.1.3.</span> <span class="nav-text">å‡½æ•°å¼æ›´æ–°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æƒ°æ€§åˆå§‹åŒ–"><span class="nav-number">1.4.1.4.</span> <span class="nav-text">æƒ°æ€§åˆå§‹åŒ–</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#useEffect"><span class="nav-number">1.4.2.</span> <span class="nav-text">useEffect</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ä½¿ç”¨æ–¹æ³•-1"><span class="nav-number">1.4.2.1.</span> <span class="nav-text">ä½¿ç”¨æ–¹æ³•</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä½¿ç”¨-class-ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜"><span class="nav-number">1.4.2.2.</span> <span class="nav-text">ä½¿ç”¨ class ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä½¿ç”¨-useEffect-ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜"><span class="nav-number">1.4.2.3.</span> <span class="nav-text">ä½¿ç”¨ useEffect ç»„ä»¶å®ç°ä¿®æ”¹æ ‡é¢˜</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#æ¸…é™¤å‰¯ä½œç”¨"><span class="nav-number">1.4.2.4.</span> <span class="nav-text">æ¸…é™¤å‰¯ä½œç”¨</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#è·³è¿‡-Effect-è¿›è¡Œæ€§èƒ½ä¼˜åŒ–"><span class="nav-number">1.4.2.5.</span> <span class="nav-text">è·³è¿‡ Effect è¿›è¡Œæ€§èƒ½ä¼˜åŒ–</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä½¿ç”¨å¤šä¸ª-Effect-å®ç°å…³æ³¨ç‚¹åˆ†ç¦»"><span class="nav-number">1.4.2.6.</span> <span class="nav-text">ä½¿ç”¨å¤šä¸ª Effect å®ç°å…³æ³¨ç‚¹åˆ†ç¦»</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#useContext"><span class="nav-number">1.4.3.</span> <span class="nav-text">useContext</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#è‡ªå®šä¹‰-Hooks"><span class="nav-number">1.4.4.</span> <span class="nav-text">è‡ªå®šä¹‰ Hooks</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#useMemoã€useCallback"><span class="nav-number">1.4.5.</span> <span class="nav-text">useMemoã€useCallback</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#æ€§èƒ½ä¼˜åŒ–"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">æ€§èƒ½ä¼˜åŒ–</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Object-isæµ…æ¯”è¾ƒ"><span class="nav-number">1.4.5.1.1.</span> <span class="nav-text">Object.isæµ…æ¯”è¾ƒ</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#å‡å°‘æ¸²æŸ“æ¬¡æ•°"><span class="nav-number">1.4.5.1.2.</span> <span class="nav-text">å‡å°‘æ¸²æŸ“æ¬¡æ•°</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#å¸¸è§é—®é¢˜"><span class="nav-number">1.4.6.</span> <span class="nav-text">å¸¸è§é—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#useEffect-ä¸èƒ½æ¥æ”¶-async-ä½œä¸ºå›è°ƒå‡½æ•°"><span class="nav-number">1.4.6.1.</span> <span class="nav-text">useEffect ä¸èƒ½æ¥æ”¶ async ä½œä¸ºå›è°ƒå‡½æ•°</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#å¦‚ä½•åœ¨-Hooks-ä¸­ä¼˜é›…çš„-Fetch-Data"><span class="nav-number">1.4.6.2.</span> <span class="nav-text">å¦‚ä½•åœ¨ Hooks ä¸­ä¼˜é›…çš„ Fetch Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ä¸è¦è¿‡åº¦ä¾èµ–-useMemo"><span class="nav-number">1.4.6.3.</span> <span class="nav-text">ä¸è¦è¿‡åº¦ä¾èµ– useMemo</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#TypeScript"><span class="nav-number">2.</span> <span class="nav-text">TypeScript</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ä»€ä¹ˆæ˜¯-TypeScript"><span class="nav-number">2.1.</span> <span class="nav-text">ä»€ä¹ˆæ˜¯ TypeScript</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ä¸ºä»€ä¹ˆé€‰æ‹©-TypeScript"><span class="nav-number">2.2.</span> <span class="nav-text">ä¸ºä»€ä¹ˆé€‰æ‹© TypeScript</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å®è·µ"><span class="nav-number">3.</span> <span class="nav-text">å®è·µ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ç›®æ ‡"><span class="nav-number">3.1.</span> <span class="nav-text">ç›®æ ‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#API"><span class="nav-number">3.2.</span> <span class="nav-text">API</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Row"><span class="nav-number">3.2.1.</span> <span class="nav-text">Row</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Col"><span class="nav-number">3.2.2.</span> <span class="nav-text">Col</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å¤§å±•èº«æ‰‹"><span class="nav-number">3.3.</span> <span class="nav-text">å¤§å±•èº«æ‰‹</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-1-æ ¹æ®-API-æ¥ç»™-Row-ç»„ä»¶å®šä¹‰-Prop-çš„ç±»å‹"><span class="nav-number">3.3.1.</span> <span class="nav-text">Step-1 æ ¹æ® API æ¥ç»™ Row ç»„ä»¶å®šä¹‰ Prop çš„ç±»å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-2-ç¼–å†™-Row-ç»„ä»¶çš„åŸºç¡€éª¨æ¶"><span class="nav-number">3.3.2.</span> <span class="nav-text">Step-2 ç¼–å†™ Row ç»„ä»¶çš„åŸºç¡€éª¨æ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-3-æ ¹æ®-API-æ¥ç»™-Col-ç»„ä»¶å®šä¹‰-Prop-çš„ç±»å‹"><span class="nav-number">3.3.3.</span> <span class="nav-text">Step-3 æ ¹æ® API æ¥ç»™ Col ç»„ä»¶å®šä¹‰ Prop çš„ç±»å‹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-4-ç¼–å†™-Col-ç»„ä»¶çš„åŸºç¡€éª¨æ¶"><span class="nav-number">3.3.4.</span> <span class="nav-text">Step-4 ç¼–å†™ Col ç»„ä»¶çš„åŸºç¡€éª¨æ¶</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æµ‹è¯•"><span class="nav-number">3.3.5.</span> <span class="nav-text">æµ‹è¯•</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-5-é™åˆ¶-Row-ç»„ä»¶çš„-Children"><span class="nav-number">3.3.6.</span> <span class="nav-text">Step-5 é™åˆ¶ Row ç»„ä»¶çš„ Children</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Step-6-é”¦ä¸Šæ·»èŠ±-gutter"><span class="nav-number">3.3.7.</span> <span class="nav-text">Step-6 é”¦ä¸Šæ·»èŠ±-gutter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#æµ‹è¯•-1"><span class="nav-number">3.3.8.</span> <span class="nav-text">æµ‹è¯•</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ€»ç»“"><span class="nav-number">4.</span> <span class="nav-text">æ€»ç»“</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="HuiAzir" src="/images/base/avatar.jpg"><p class="site-author-name" itemprop="name">HuiAzir</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">4</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2h1aWF6aXI=" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;huiazir"><i class="fab fa-github fa-fw"></i></span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOmh1aWF6ckBxcS5jb20=" title="E-Mail â†’ mailto:huiazr@qq.com"><i class="fa fa-envelope fa-fw"></i></span></span></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">HuiAzir</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-chart-area"></i> </span><span title="ç«™ç‚¹æ€»å­—æ•°">59k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="ç«™ç‚¹é˜…è¯»æ—¶é•¿">53 åˆ†é’Ÿ</span></div></div></footer></div><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'eqE1Ltm8jwlCW8APNdJLclQo-gzGzoHsz',
      appKey     : 'wS03f980xVhc1MYLeDP7tdoH',
      placeholder: "ç•™è¨€...",
      avatar     : 'hide',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});</script></body></html>